import{_ as c,C as n,o as d,c as u,j as t,a as s,E as a,w as i,b as p,ar as h,aD as o}from"./chunks/framework.BeKdlGsR.js";const T=JSON.parse('{"title":"发布插件","description":"","frontmatter":{},"headers":[],"relativePath":"develop/plugin/publish.md","filePath":"develop/plugin/publish.md","lastUpdated":1770517839000}'),E={name:"develop/plugin/publish.md"},b={class:"tip custom-block"},A={class:"tip custom-block"},m={class:"info custom-block"},B={class:"warning custom-block"};function C(f,e,y,F,P,q){const k=n("NolebasePageProperties"),l=n("VPNolebaseInlineLinkPreview"),r=n("Mermaid"),g=n("NolebaseGitChangelog");return d(),u("div",null,[e[44]||(e[44]=t("h1",{id:"发布插件",tabindex:"-1"},[s("发布插件 "),t("a",{class:"header-anchor",href:"#发布插件","aria-label":'Permalink to "发布插件"'},"​")],-1)),a(k),e[45]||(e[45]=t("p",null,"本章节将详细介绍如何通过 CI/CD 自动化流程发布你的 NapCat 插件，并将其收录到官方插件索引中。",-1)),t("div",b,[e[5]||(e[5]=t("p",{class:"custom-block-title"},"前提条件",-1)),t("ul",null,[t("li",null,[e[1]||(e[1]=s("你已经基于 ",-1)),a(l,{href:"https://github.com/NapNeko/napcat-plugin-template",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[0]||(e[0]=[s("napcat-plugin-template",-1)])]),_:1}),e[2]||(e[2]=s(" 创建了自己的插件仓库",-1))]),e[3]||(e[3]=t("li",null,"插件代码已经开发完成，并可以正常构建",-1)),e[4]||(e[4]=t("li",null,"你有一个 GitHub 账号",-1))])]),e[46]||(e[46]=t("h2",{id:"整体流程",tabindex:"-1"},[s("整体流程 "),t("a",{class:"header-anchor",href:"#整体流程","aria-label":'Permalink to "整体流程"'},"​")],-1)),e[47]||(e[47]=t("p",null,[s("整个发布流程是自动化的，只需完成两步操作："),t("strong",null,"配置 Secrets"),s(" 和 "),t("strong",null,"推送 tag"),s("。")],-1)),(d(),p(h,null,{default:i(()=>[a(r,{id:"mermaid-33",class:"mermaid my-class",graph:"flowchart%20LR%0A%20%20%20%20A%5B%22%E6%8E%A8%E9%80%81%20v*%20tag%22%5D%20--%3E%20B%5B%22CI%20%E8%87%AA%E5%8A%A8%E6%9E%84%E5%BB%BA%22%5D%0A%20%20%20%20B%20--%3E%20C%5B%22%E6%89%93%E5%8C%85%20zip%22%5D%0A%20%20%20%20C%20--%3E%20D%5B%22%E5%88%9B%E5%BB%BA%20GitHub%20Release%22%5D%0A%20%20%20%20D%20--%3E%20E%5B%22%E8%87%AA%E5%8A%A8%E6%8F%90%E4%BA%A4%20PR%5Cn%E5%88%B0%E7%B4%A2%E5%BC%95%E4%BB%93%E5%BA%93%22%5D%0A%20%20%20%20E%20--%3E%20F%5B%22%E7%B4%A2%E5%BC%95%E4%BB%93%E5%BA%93%5CnCI%20%E8%87%AA%E5%8A%A8%E5%AE%A1%E6%A0%B8%22%5D%0A%20%20%20%20F%20--%3E%20G%5B%22%E7%BB%B4%E6%8A%A4%E8%80%85%E5%90%88%E5%B9%B6%22%5D%0A%0A%20%20%20%20style%20A%20fill%3A%234CAF50%2Ccolor%3A%23fff%0A%20%20%20%20style%20D%20fill%3A%232196F3%2Ccolor%3A%23fff%0A%20%20%20%20style%20G%20fill%3A%23FF9800%2Ccolor%3A%23fff%0A"})]),fallback:i(()=>[...e[6]||(e[6]=[s(" Loading... ",-1)])]),_:1})),e[48]||(e[48]=o("",15)),t("div",A,[e[14]||(e[14]=t("p",{class:"custom-block-title"},"无需手动 fork 索引仓库",-1)),e[15]||(e[15]=t("p",null,[s("工作流会"),t("strong",null,"自动完成"),s("以下操作，你只需配置 "),t("code",null,"INDEX_PAT"),s(" 即可：")],-1)),t("ol",null,[e[10]||(e[10]=t("li",null,"通过 PAT 获取你的 GitHub 用户名",-1)),t("li",null,[e[8]||(e[8]=s("自动 fork ",-1)),a(l,{href:"https://github.com/NapNeko/napcat-plugin-index",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[7]||(e[7]=[s("napcat-plugin-index",-1)])]),_:1}),e[9]||(e[9]=s(" 到你的账号下（如果尚未 fork）",-1))]),e[11]||(e[11]=t("li",null,"同步 fork 到上游最新状态",-1)),e[12]||(e[12]=t("li",null,"将更新推送到你的 fork",-1)),e[13]||(e[13]=t("li",null,"从 fork 向官方仓库发起 PR",-1))])]),e[49]||(e[49]=o("",12)),(d(),p(h,null,{default:i(()=>[a(r,{id:"mermaid-358",class:"mermaid my-class",graph:"flowchart%20LR%0A%20%20%20%20A%5B%22Checkout%20%E4%BB%A3%E7%A0%81%22%5D%20--%3E%20B%5B%22%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%22%5D%0A%20%20%20%20B%20--%3E%20C%5B%22%E8%AF%BB%E5%8F%96%E7%89%88%E6%9C%AC%E5%8F%B7%22%5D%0A%20%20%20%20C%20--%3E%20D%5B%22%E6%9E%84%E5%BB%BA%E9%A1%B9%E7%9B%AE%22%5D%0A%20%20%20%20D%20--%3E%20E%5B%22%E6%89%93%E5%8C%85%20zip%22%5D%0A%20%20%20%20E%20--%3E%20F%5B%22%E7%94%9F%E6%88%90%20Release%20Note%22%5D%0A%20%20%20%20F%20--%3E%20G%5B%22%E5%88%9B%E5%BB%BA%20GitHub%20Release%22%5D%0A%20%20%20%20G%20--%3E%20H%5B%22%E8%A7%A6%E5%8F%91%E7%B4%A2%E5%BC%95%E6%9B%B4%E6%96%B0%22%5D%0A"})]),fallback:i(()=>[...e[16]||(e[16]=[s(" Loading... ",-1)])]),_:1})),e[50]||(e[50]=o("",16)),(d(),p(h,null,{default:i(()=>[a(r,{id:"mermaid-437",class:"mermaid my-class",graph:"flowchart%20LR%0A%20%20%20%20A%5B%22%E8%AF%BB%E5%8F%96%20package.json%5Cn%E5%85%83%E4%BF%A1%E6%81%AF%22%5D%20--%3E%20B%5B%22%E6%9E%84%E9%80%A0%E4%B8%8B%E8%BD%BD%E9%93%BE%E6%8E%A5%22%5D%0A%20%20%20%20B%20--%3E%20C%5B%22%E9%AA%8C%E8%AF%81%E8%B5%84%E6%BA%90%E5%8F%AF%E8%BE%BE%22%5D%0A%20%20%20%20C%20--%3E%20D%5B%22%E8%87%AA%E5%8A%A8%20fork%5Cn%E7%B4%A2%E5%BC%95%E4%BB%93%E5%BA%93%22%5D%0A%20%20%20%20D%20--%3E%20E%5B%22%E5%90%8C%E6%AD%A5%20fork%5Cn%E5%88%B0%E4%B8%8A%E6%B8%B8%E6%9C%80%E6%96%B0%22%5D%0A%20%20%20%20E%20--%3E%20F%5B%22%E6%9B%B4%E6%96%B0%5Cnplugins.v4.json%22%5D%0A%20%20%20%20F%20--%3E%20G%5B%22%E9%80%9A%E8%BF%87%20fork%5Cn%E6%8F%90%E4%BA%A4%20PR%22%5D%0A"})]),fallback:i(()=>[...e[17]||(e[17]=[s(" Loading... ",-1)])]),_:1})),e[51]||(e[51]=o("",13)),t("p",null,[e[19]||(e[19]=s("然后通过 ",-1)),a(l,{href:"https://github.com/peter-evans/create-pull-request",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[18]||(e[18]=[s("peter-evans/create-pull-request",-1)])]),_:1}),e[20]||(e[20]=s(" Action 的 ",-1)),e[21]||(e[21]=t("code",null,"push-to-fork",-1)),e[22]||(e[22]=s(" 功能，将更新推送到你的 fork 仓库，并从 fork 向官方索引仓库发起 PR。",-1))]),t("div",m,[e[26]||(e[26]=t("p",{class:"custom-block-title"},"为什么要通过 fork 提交？",-1)),t("p",null,[e[24]||(e[24]=s("你的 PAT 没有官方索引仓库 ",-1)),a(l,{href:"https://github.com/NapNeko/napcat-plugin-index",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[23]||(e[23]=[s("napcat-plugin-index",-1)])]),_:1}),e[25]||(e[25]=s(" 的写入权限，这是正常的。工作流自动将你的 fork 作为中转，完整流程是：",-1))]),e[27]||(e[27]=o("",1))]),e[52]||(e[52]=t("h2",{id:"索引仓库的自动审核",tabindex:"-1"},[s("索引仓库的自动审核 "),t("a",{class:"header-anchor",href:"#索引仓库的自动审核","aria-label":'Permalink to "索引仓库的自动审核"'},"​")],-1)),t("p",null,[e[29]||(e[29]=s("你的 PR 提交到 ",-1)),a(l,{href:"https://github.com/NapNeko/napcat-plugin-index",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[28]||(e[28]=[s("napcat-plugin-index",-1)])]),_:1}),e[30]||(e[30]=s(" 后，索引仓库有一套完善的自动化审核流程：",-1))]),e[53]||(e[53]=o("",3)),t("div",B,[e[38]||(e[38]=t("p",{class:"custom-block-title"},"常见校验失败原因",-1)),t("ul",null,[e[34]||(e[34]=t("li",null,[s("插件 ID 不符合 "),t("code",null,"napcat-plugin-xxx"),s(" 格式")],-1)),e[35]||(e[35]=t("li",null,"必填字段为空",-1)),e[36]||(e[36]=t("li",null,[t("code",null,"downloadUrl"),s(" 不是可访问的 "),t("code",null,".zip"),s(" 链接")],-1)),t("li",null,[e[32]||(e[32]=s("版本号不符合 ",-1)),a(l,{href:"https://semver.org/",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[31]||(e[31]=[s("semver",-1)])]),_:1}),e[33]||(e[33]=s(" 格式",-1))]),e[37]||(e[37]=t("li",null,[s("插件包内 "),t("code",null,"package.json"),s(" 的 "),t("code",null,"name"),s(" 与索引中的 "),t("code",null,"id"),s(" 不一致")],-1))])]),e[54]||(e[54]=o("",16)),t("p",null,[e[41]||(e[41]=s("可以参考模板仓库的 ",-1)),a(l,{href:"https://github.com/NapNeko/napcat-plugin-template/blob/main/.github/workflows/release.yml",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[39]||(e[39]=[s("release.yml",-1)])]),_:1}),e[42]||(e[42]=s(" 和 ",-1)),a(l,{href:"https://github.com/NapNeko/napcat-plugin-template/blob/main/.github/workflows/update-index.yml",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[40]||(e[40]=[s("update-index.yml",-1)])]),_:1}),e[43]||(e[43]=s("。",-1))]),e[55]||(e[55]=o("",10)),a(g)])}const D=c(E,[["render",C]]);export{T as __pageData,D as default};
