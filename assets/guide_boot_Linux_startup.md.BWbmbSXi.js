import{_ as l,C as i,c as h,o as p,j as a,G as e,ar as d,a as r}from"./chunks/framework.DwOsETNj.js";const F=JSON.parse('{"title":"Linux 系统设置开机自启动步骤","description":"","frontmatter":{},"headers":[],"relativePath":"guide/boot/Linux_startup.md","filePath":"guide/boot/Linux_startup.md","lastUpdated":1750596199000}'),k={name:"guide/boot/Linux_startup.md"};function o(c,s,g,u,b,y){const t=i("NolebasePageProperties"),n=i("NolebaseGitChangelog");return p(),h("div",null,[s[0]||(s[0]=a("h1",{id:"linux-系统设置开机自启动步骤",tabindex:"-1"},[r("Linux 系统设置开机自启动步骤 "),a("a",{class:"header-anchor",href:"#linux-系统设置开机自启动步骤","aria-label":'Permalink to "Linux 系统设置开机自启动步骤"'},"​")],-1)),e(t),s[1]||(s[1]=d(`<p>本步骤适用于 Ubuntu 系统，24.04 版本测试通过。其它版本未测试。</p><h3 id="步骤1-创建服务文件" tabindex="-1">步骤1：创建服务文件 <a class="header-anchor" href="#步骤1-创建服务文件" aria-label="Permalink to &quot;步骤1：创建服务文件&quot;">​</a></h3><p>打开终端，运行以下命令创建一个新的 systemd 服务文件：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nano</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/systemd/system/napcat.service</span></span></code></pre></div><h3 id="步骤2-编辑服务文件" tabindex="-1">步骤2：编辑服务文件 <a class="header-anchor" href="#步骤2-编辑服务文件" aria-label="Permalink to &quot;步骤2：编辑服务文件&quot;">​</a></h3><p>在文件中添加以下内容：</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#DBEDFF;--shiki-dark-text-decoration:underline;">Unit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Description=Napcat Service</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">After=network.target</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#DBEDFF;--shiki-dark-text-decoration:underline;">Service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">User=root</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ExecStart=/usr/bin/screen -dmS napcat /usr/bin/bash -c &quot;/usr/bin/xvfb-run -a qq --no-sandbox&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RemainAfterExit=yes</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Type=oneshot</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#DBEDFF;--shiki-dark-text-decoration:underline;">Install</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WantedBy=multi-user.target</span></span></code></pre></div><p>确保使用绝对路径来执行命令，以避免路径相关的问题。</p><h3 id="步骤3-保存并关闭文件" tabindex="-1">步骤3：保存并关闭文件 <a class="header-anchor" href="#步骤3-保存并关闭文件" aria-label="Permalink to &quot;步骤3：保存并关闭文件&quot;">​</a></h3><p>按下 <code>Ctrl + O</code> 保存，<code>Ctrl + X</code> 关闭 nano 编辑器。</p><h3 id="步骤4-重新加载-systemd-守护进程" tabindex="-1">步骤4：重新加载 systemd 守护进程 <a class="header-anchor" href="#步骤4-重新加载-systemd-守护进程" aria-label="Permalink to &quot;步骤4：重新加载 systemd 守护进程&quot;">​</a></h3><p>更新 systemd，以使其识别新创建的服务文件：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> daemon-reload</span></span></code></pre></div><h3 id="步骤5-启用服务" tabindex="-1">步骤5：启用服务 <a class="header-anchor" href="#步骤5-启用服务" aria-label="Permalink to &quot;步骤5：启用服务&quot;">​</a></h3><p>将服务启用以便在启动时运行：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> napcat.service</span></span></code></pre></div><h3 id="步骤6-验证服务状态" tabindex="-1">步骤6：验证服务状态 <a class="header-anchor" href="#步骤6-验证服务状态" aria-label="Permalink to &quot;步骤6：验证服务状态&quot;">​</a></h3><p>检查服务是否已正确启用：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> napcat.service</span></span></code></pre></div><h3 id="可选步骤-立即启动服务-测试用" tabindex="-1">可选步骤：立即启动服务（测试用） <a class="header-anchor" href="#可选步骤-立即启动服务-测试用" aria-label="Permalink to &quot;可选步骤：立即启动服务（测试用）&quot;">​</a></h3><p>如果想在当前会话中测试服务，可以运行：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> napcat.service</span></span></code></pre></div><p>然后，检查 screen 会话是否存在：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">screen</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ls</span></span></code></pre></div><p>你应该会看到名为 <code>napcat</code> 的会话。</p><h3 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h3><ul><li><strong>用户权限</strong>：在服务文件中指定正确的 <code>User</code>，确保程序以正确的用户权限运行。</li><li><strong>绝对路径</strong>：使用绝对路径（如 <code>/usr/bin/screen</code>）确保命令能正确执行。</li><li><strong>依赖关系</strong>：如果命令依赖于特定的网络或其他服务，可能需要调整 <code>After</code> 部分。</li><li><strong>日志检查</strong>：如果服务没有按预期运行，可以查看日志：<code>journalctl -u napcat.service -b</code>，这里的 <code>-b</code> 显示上次启动时的日志。</li></ul>`,27)),e(n)])}const m=l(k,[["render",o]]);export{F as __pageData,m as default};
