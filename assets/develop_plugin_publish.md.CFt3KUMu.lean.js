import{_ as g,C as o,o as d,c as u,j as t,a as s,E as a,w as i,b as r,ar as h,aD as n}from"./chunks/framework.BeKdlGsR.js";const P=JSON.parse('{"title":"发布插件","description":"","frontmatter":{},"headers":[],"relativePath":"develop/plugin/publish.md","filePath":"develop/plugin/publish.md","lastUpdated":1770492615000}'),E={name:"develop/plugin/publish.md"},b={class:"tip custom-block"},m={class:"warning custom-block"};function A(B,e,y,C,F,f){const k=o("NolebasePageProperties"),l=o("VPNolebaseInlineLinkPreview"),p=o("Mermaid"),c=o("NolebaseGitChangelog");return d(),u("div",null,[e[33]||(e[33]=t("h1",{id:"发布插件",tabindex:"-1"},[s("发布插件 "),t("a",{class:"header-anchor",href:"#发布插件","aria-label":'Permalink to "发布插件"'},"​")],-1)),a(k),e[34]||(e[34]=t("p",null,"本章节将详细介绍如何通过 CI/CD 自动化流程发布你的 NapCat 插件，并将其收录到官方插件索引中。",-1)),t("div",b,[e[5]||(e[5]=t("p",{class:"custom-block-title"},"前提条件",-1)),t("ul",null,[t("li",null,[e[1]||(e[1]=s("你已经基于 ",-1)),a(l,{href:"https://github.com/NapNeko/napcat-plugin-template",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[0]||(e[0]=[s("napcat-plugin-template",-1)])]),_:1}),e[2]||(e[2]=s(" 创建了自己的插件仓库",-1))]),e[3]||(e[3]=t("li",null,"插件代码已经开发完成，并可以正常构建",-1)),e[4]||(e[4]=t("li",null,"你有一个 GitHub 账号",-1))])]),e[35]||(e[35]=t("h2",{id:"整体流程",tabindex:"-1"},[s("整体流程 "),t("a",{class:"header-anchor",href:"#整体流程","aria-label":'Permalink to "整体流程"'},"​")],-1)),e[36]||(e[36]=t("p",null,[s("整个发布流程是自动化的，只需完成两步操作："),t("strong",null,"配置 Secrets"),s(" 和 "),t("strong",null,"推送 tag"),s("。")],-1)),(d(),r(h,null,{default:i(()=>[a(p,{id:"mermaid-33",class:"mermaid my-class",graph:"flowchart%20LR%0A%20%20%20%20A%5B%22%E6%8E%A8%E9%80%81%20v*%20tag%22%5D%20--%3E%20B%5B%22CI%20%E8%87%AA%E5%8A%A8%E6%9E%84%E5%BB%BA%22%5D%0A%20%20%20%20B%20--%3E%20C%5B%22%E6%89%93%E5%8C%85%20zip%22%5D%0A%20%20%20%20C%20--%3E%20D%5B%22%E5%88%9B%E5%BB%BA%20GitHub%20Release%22%5D%0A%20%20%20%20D%20--%3E%20E%5B%22%E8%87%AA%E5%8A%A8%E6%8F%90%E4%BA%A4%20PR%5Cn%E5%88%B0%E7%B4%A2%E5%BC%95%E4%BB%93%E5%BA%93%22%5D%0A%20%20%20%20E%20--%3E%20F%5B%22%E7%B4%A2%E5%BC%95%E4%BB%93%E5%BA%93%5CnCI%20%E8%87%AA%E5%8A%A8%E5%AE%A1%E6%A0%B8%22%5D%0A%20%20%20%20F%20--%3E%20G%5B%22%E7%BB%B4%E6%8A%A4%E8%80%85%E5%90%88%E5%B9%B6%22%5D%0A%0A%20%20%20%20style%20A%20fill%3A%234CAF50%2Ccolor%3A%23fff%0A%20%20%20%20style%20D%20fill%3A%232196F3%2Ccolor%3A%23fff%0A%20%20%20%20style%20G%20fill%3A%23FF9800%2Ccolor%3A%23fff%0A"})]),fallback:i(()=>[...e[6]||(e[6]=[s(" Loading... ",-1)])]),_:1})),e[37]||(e[37]=n("",27)),(d(),r(h,null,{default:i(()=>[a(p,{id:"mermaid-256",class:"mermaid my-class",graph:"flowchart%20LR%0A%20%20%20%20A%5B%22Checkout%20%E4%BB%A3%E7%A0%81%22%5D%20--%3E%20B%5B%22%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%22%5D%0A%20%20%20%20B%20--%3E%20C%5B%22%E8%AF%BB%E5%8F%96%E7%89%88%E6%9C%AC%E5%8F%B7%22%5D%0A%20%20%20%20C%20--%3E%20D%5B%22%E6%9E%84%E5%BB%BA%E9%A1%B9%E7%9B%AE%22%5D%0A%20%20%20%20D%20--%3E%20E%5B%22%E6%89%93%E5%8C%85%20zip%22%5D%0A%20%20%20%20E%20--%3E%20F%5B%22%E7%94%9F%E6%88%90%20Release%20Note%22%5D%0A%20%20%20%20F%20--%3E%20G%5B%22%E5%88%9B%E5%BB%BA%20GitHub%20Release%22%5D%0A%20%20%20%20G%20--%3E%20H%5B%22%E8%A7%A6%E5%8F%91%E7%B4%A2%E5%BC%95%E6%9B%B4%E6%96%B0%22%5D%0A"})]),fallback:i(()=>[...e[7]||(e[7]=[s(" Loading... ",-1)])]),_:1})),e[38]||(e[38]=n("",16)),(d(),r(h,null,{default:i(()=>[a(p,{id:"mermaid-335",class:"mermaid my-class",graph:"flowchart%20LR%0A%20%20%20%20A%5B%22%E8%AF%BB%E5%8F%96%20package.json%5Cn%E5%85%83%E4%BF%A1%E6%81%AF%22%5D%20--%3E%20B%5B%22%E6%9E%84%E9%80%A0%E4%B8%8B%E8%BD%BD%E9%93%BE%E6%8E%A5%22%5D%0A%20%20%20%20B%20--%3E%20C%5B%22%E9%AA%8C%E8%AF%81%E8%B5%84%E6%BA%90%E5%8F%AF%E8%BE%BE%22%5D%0A%20%20%20%20C%20--%3E%20D%5B%22%E6%9B%B4%E6%96%B0%5Cnplugins.v4.json%22%5D%0A%20%20%20%20D%20--%3E%20E%5B%22%E5%90%91%E7%B4%A2%E5%BC%95%E4%BB%93%E5%BA%93%5Cn%E6%8F%90%E4%BA%A4%20PR%22%5D%0A"})]),fallback:i(()=>[...e[8]||(e[8]=[s(" Loading... ",-1)])]),_:1})),e[39]||(e[39]=n("",8)),t("p",null,[e[10]||(e[10]=s("CI 会 checkout 索引仓库 ",-1)),a(l,{href:"https://github.com/NapNeko/napcat-plugin-index",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[9]||(e[9]=[s("napcat-plugin-index",-1)])]),_:1}),e[11]||(e[11]=s("，使用 Node.js 脚本更新 ",-1)),e[12]||(e[12]=t("code",null,"plugins.v4.json",-1)),e[13]||(e[13]=s(" 文件：",-1))]),e[40]||(e[40]=t("ul",null,[t("li",null,"如果插件 ID 已存在 → 更新该条目"),t("li",null,"如果是新插件 → 追加到列表")],-1)),t("p",null,[e[15]||(e[15]=s("然后通过 ",-1)),a(l,{href:"https://github.com/peter-evans/create-pull-request",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[14]||(e[14]=[s("peter-evans/create-pull-request",-1)])]),_:1}),e[16]||(e[16]=s(" Action 自动创建 PR。",-1))]),e[41]||(e[41]=t("h2",{id:"索引仓库的自动审核",tabindex:"-1"},[s("索引仓库的自动审核 "),t("a",{class:"header-anchor",href:"#索引仓库的自动审核","aria-label":'Permalink to "索引仓库的自动审核"'},"​")],-1)),t("p",null,[e[18]||(e[18]=s("你的 PR 提交到 ",-1)),a(l,{href:"https://github.com/NapNeko/napcat-plugin-index",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[17]||(e[17]=[s("napcat-plugin-index",-1)])]),_:1}),e[19]||(e[19]=s(" 后，索引仓库有一套完善的自动化审核流程：",-1))]),e[42]||(e[42]=n("",3)),t("div",m,[e[27]||(e[27]=t("p",{class:"custom-block-title"},"常见校验失败原因",-1)),t("ul",null,[e[23]||(e[23]=t("li",null,[s("插件 ID 不符合 "),t("code",null,"napcat-plugin-xxx"),s(" 格式")],-1)),e[24]||(e[24]=t("li",null,"必填字段为空",-1)),e[25]||(e[25]=t("li",null,[t("code",null,"downloadUrl"),s(" 不是可访问的 "),t("code",null,".zip"),s(" 链接")],-1)),t("li",null,[e[21]||(e[21]=s("版本号不符合 ",-1)),a(l,{href:"https://semver.org/",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[20]||(e[20]=[s("semver",-1)])]),_:1}),e[22]||(e[22]=s(" 格式",-1))]),e[26]||(e[26]=t("li",null,[s("插件包内 "),t("code",null,"package.json"),s(" 的 "),t("code",null,"name"),s(" 与索引中的 "),t("code",null,"id"),s(" 不一致")],-1))])]),e[43]||(e[43]=n("",16)),t("p",null,[e[30]||(e[30]=s("可以参考模板仓库的 ",-1)),a(l,{href:"https://github.com/NapNeko/napcat-plugin-template/blob/main/.github/workflows/release.yml",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[28]||(e[28]=[s("release.yml",-1)])]),_:1}),e[31]||(e[31]=s(" 和 ",-1)),a(l,{href:"https://github.com/NapNeko/napcat-plugin-template/blob/main/.github/workflows/update-index.yml",target:"_blank",rel:"noreferrer"},{default:i(()=>[...e[29]||(e[29]=[s("update-index.yml",-1)])]),_:1}),e[32]||(e[32]=s("。",-1))]),e[44]||(e[44]=n("",7)),a(c)])}const I=g(E,[["render",A]]);export{P as __pageData,I as default};
