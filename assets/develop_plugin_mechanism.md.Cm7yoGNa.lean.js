import{_ as g,C as l,o as h,c as A,j as a,a as i,E as t,aD as p,b as E,w as n,ar as d}from"./chunks/framework.BeKdlGsR.js";const x=JSON.parse('{"title":"插件机制原理","description":"","frontmatter":{},"headers":[],"relativePath":"develop/plugin/mechanism.md","filePath":"develop/plugin/mechanism.md","lastUpdated":1770550472000}'),c={name:"develop/plugin/mechanism.md"},B={class:"tip custom-block"},u={class:"info custom-block"};function y(F,s,C,b,D,f){const r=l("NolebasePageProperties"),k=l("Mermaid"),e=l("VPNolebaseInlineLinkPreview"),o=l("NolebaseGitChangelog");return h(),A("div",null,[s[28]||(s[28]=a("h1",{id:"插件机制原理",tabindex:"-1"},[i("插件机制原理 "),a("a",{class:"header-anchor",href:"#插件机制原理","aria-label":'Permalink to "插件机制原理"'},"​")],-1)),t(r),s[29]||(s[29]=p("",7)),(h(),E(d,null,{default:n(()=>[t(k,{id:"mermaid-28",class:"mermaid my-class",graph:"block-beta%0A%20%20%20%20columns%203%0A%20%20%20%20%0A%20%20%20%20block%3Anapcat%3A3%0A%20%20%20%20%20%20%20%20columns%203%0A%20%20%20%20%20%20%20%20A%5B%22NapCat%20Core%5Cn(QQ%20%E5%BA%95%E5%B1%82)%22%5D%0A%20%20%20%20%20%20%20%20B%5B%22OneBot11%5CnAdapter%22%5D%0A%20%20%20%20%20%20%20%20C%5B%22%E6%8F%92%E4%BB%B6%E7%AE%A1%E7%90%86%E5%99%A8%5Cn(%E5%8A%A0%E8%BD%BD%2F%E5%8D%B8%E8%BD%BD%E6%8F%92%E4%BB%B6)%22%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20space%3A3%0A%20%20%20%20%0A%20%20%20%20block%3Actx%3A3%0A%20%20%20%20%20%20%20%20D%5B%22NapCatPluginContext%5Cn(%E6%8F%92%E4%BB%B6%E4%B8%8A%E4%B8%8B%E6%96%87%E5%AF%B9%E8%B1%A1%20ctx)%22%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20space%3A3%0A%20%20%20%20%0A%20%20%20%20block%3Aplugin%3A3%0A%20%20%20%20%20%20%20%20columns%201%0A%20%20%20%20%20%20%20%20E%5B%22%E4%BD%A0%E7%9A%84%E6%8F%92%E4%BB%B6%22%5D%0A%20%20%20%20%20%20%20%20F%5B%22plugin_init(ctx)%20%E2%86%90%20%E5%88%9D%E5%A7%8B%E5%8C%96%E6%97%B6%E6%94%B6%E5%88%B0%20ctx%5Cnplugin_onmessage(ctx)%20%E2%86%90%20%E6%B6%88%E6%81%AF%E5%88%B0%E6%9D%A5%E6%97%B6%E4%BD%BF%E7%94%A8%20ctx%20%E5%A4%84%E7%90%86%5Cnplugin_onevent(ctx)%20%E2%86%90%20%E4%BA%8B%E4%BB%B6%E5%88%B0%E6%9D%A5%E6%97%B6%E4%BD%BF%E7%94%A8%20ctx%20%E5%A4%84%E7%90%86%5Cnplugin_cleanup(ctx)%20%E2%86%90%20%E5%8D%B8%E8%BD%BD%E6%97%B6%E4%BD%BF%E7%94%A8%20ctx%20%E6%B8%85%E7%90%86%22%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20A%20--%3E%20D%0A%20%20%20%20B%20--%3E%20D%0A%20%20%20%20C%20--%3E%20D%0A%20%20%20%20D%20--%20%22%E4%BC%A0%E9%80%92%E7%BB%99%22%20--%3E%20E%0A%0A%20%20%20%20style%20napcat%20fill%3A%23e8f4f8%2Cstroke%3A%232196F3%0A%20%20%20%20style%20ctx%20fill%3A%23fff3e0%2Cstroke%3A%23FF9800%0A%20%20%20%20style%20plugin%20fill%3A%23e8f5e9%2Cstroke%3A%234CAF50%0A"})]),fallback:n(()=>[...s[0]||(s[0]=[i(" Loading... ",-1)])]),_:1})),s[30]||(s[30]=p("",6)),a("div",B,[s[13]||(s[13]=a("p",{class:"custom-block-title"},"API 查阅方式",-1)),a("ul",null,[a("li",null,[s[3]||(s[3]=a("strong",null,"使用 AI 查询",-1)),s[4]||(s[4]=i("：官方插件模板 ",-1)),t(e,{href:"https://github.com/NapNeko/napcat-plugin-template",target:"_blank",rel:"noreferrer"},{default:n(()=>[...s[1]||(s[1]=[i("napcat-plugin-template",-1)])]),_:1}),s[5]||(s[5]=i(" 的 ",-1)),s[6]||(s[6]=a("code",null,".vscode/mcp.json",-1)),s[7]||(s[7]=i(" 中已预配置了 ",-1)),t(e,{href:"https://napcat.apifox.cn/",target:"_blank",rel:"noreferrer"},{default:n(()=>[...s[2]||(s[2]=[i("napcat.apifox.cn",-1)])]),_:1}),s[8]||(s[8]=i(" 的 MCP 服务器。使用 VS Code + GitHub Copilot 打开项目后，可以直接在 Copilot Chat 中用自然语言查询 OneBot 和 NapCat 提供的各种 API 接口。",-1))]),a("li",null,[s[10]||(s[10]=a("strong",null,"手动查阅",-1)),s[11]||(s[11]=i("：也可以直接访问 ",-1)),t(e,{href:"https://napcat.apifox.cn/",target:"_blank",rel:"noreferrer"},{default:n(()=>[...s[9]||(s[9]=[i("https://napcat.apifox.cn/",-1)])]),_:1}),s[12]||(s[12]=i(" 浏览完整的 API 文档。",-1))])])]),s[31]||(s[31]=p("",18)),a("p",null,[s[15]||(s[15]=i("实际开发中，很多插件会 ",-1)),s[16]||(s[16]=a("strong",null,"同时",-1)),s[17]||(s[17]=i(" 使用这两种模式 —— 处理消息的同时提供一个 WebUI 管理界面。官方插件模板 ",-1)),t(e,{href:"https://github.com/NapNeko/napcat-plugin-template",target:"_blank",rel:"noreferrer"},{default:n(()=>[...s[14]||(s[14]=[i("napcat-plugin-template",-1)])]),_:1}),s[18]||(s[18]=i(" 就是这种模式的典型示例。",-1))]),a("div",u,[s[21]||(s[21]=a("p",{class:"custom-block-title"},"关于插件模板",-1)),a("p",null,[t(e,{href:"https://github.com/NapNeko/napcat-plugin-template",target:"_blank",rel:"noreferrer"},{default:n(()=>[...s[19]||(s[19]=[i("napcat-plugin-template",-1)])]),_:1}),s[20]||(s[20]=i(" 会随着 NapCat 项目的更新而持续调整（如 API 变化、最佳实践优化等）。建议开发前以模板仓库的最新版本为准，并关注仓库的 Release 和 README 以了解变更。",-1))])]),s[32]||(s[32]=a("h2",{id:"生命周期概览",tabindex:"-1"},[i("生命周期概览 "),a("a",{class:"header-anchor",href:"#生命周期概览","aria-label":'Permalink to "生命周期概览"'},"​")],-1)),s[33]||(s[33]=a("p",null,"NapCat 通过调用你导出的特定函数来驱动插件运行：",-1)),(h(),E(d,null,{default:n(()=>[t(k,{id:"mermaid-214",class:"mermaid my-class",graph:"flowchart%20TD%0A%20%20%20%20A%5B%22NapCat%20%E5%90%AF%E5%8A%A8%22%5D%20--%3E%20B%5B%22%E6%89%AB%E6%8F%8F%20plugins%20%E7%9B%AE%E5%BD%95%22%5D%0A%20%20%20%20B%20--%3E%20C%5B%22%E5%8A%A0%E8%BD%BD%E6%8F%92%E4%BB%B6%E6%A8%A1%E5%9D%97%22%5D%0A%20%20%20%20C%20--%3E%20D%5B%22%E8%B0%83%E7%94%A8%20plugin_init(ctx)%5Cn%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%9A%E6%B3%A8%E5%86%8C%E8%B7%AF%E7%94%B1%E3%80%81%E5%8A%A0%E8%BD%BD%E9%85%8D%E7%BD%AE%E7%AD%89%22%5D%0A%20%20%20%20D%20--%3E%20E%5B%22%E5%BC%80%E5%A7%8B%E7%9B%91%E5%90%AC%E6%B6%88%E6%81%AF%2F%E4%BA%8B%E4%BB%B6%22%5D%0A%20%20%20%20E%20--%3E%20F%5B%22plugin_onmessage(ctx%2C%20event)%5Cn%E6%B6%88%E6%81%AF%E5%88%B0%E6%9D%A5%22%5D%0A%20%20%20%20E%20--%3E%20G%5B%22plugin_onevent(ctx%2C%20event)%5Cn%E5%85%B6%E4%BB%96%E4%BA%8B%E4%BB%B6%E5%88%B0%E6%9D%A5%22%5D%0A%20%20%20%20F%20--%3E%20E%0A%20%20%20%20G%20--%3E%20E%0A%20%20%20%20D%20--%3E%20H%5B%22%E6%8F%92%E4%BB%B6%E5%8D%B8%E8%BD%BD%2F%E9%87%8D%E8%BD%BD%E6%97%B6%22%5D%0A%20%20%20%20H%20--%3E%20I%5B%22plugin_cleanup(ctx)%5Cn%E6%B8%85%E7%90%86%EF%BC%9A%E9%87%8A%E6%94%BE%E8%B5%84%E6%BA%90%E3%80%81%E5%81%9C%E6%AD%A2%E5%AE%9A%E6%97%B6%E5%99%A8%E7%AD%89%22%5D%0A%0A%20%20%20%20style%20A%20fill%3A%23e8f4f8%2Cstroke%3A%232196F3%0A%20%20%20%20style%20D%20fill%3A%23fff3e0%2Cstroke%3A%23FF9800%0A%20%20%20%20style%20F%20fill%3A%23e8f5e9%2Cstroke%3A%234CAF50%0A%20%20%20%20style%20G%20fill%3A%23e8f5e9%2Cstroke%3A%234CAF50%0A%20%20%20%20style%20I%20fill%3A%23ffebee%2Cstroke%3A%23f44336%0A"})]),fallback:n(()=>[...s[22]||(s[22]=[i(" Loading... ",-1)])]),_:1})),s[34]||(s[34]=p("",5)),a("ul",null,[a("li",null,[t(e,{href:"./"},{default:n(()=>[...s[23]||(s[23]=[i("快速开始开发插件",-1)])]),_:1})]),a("li",null,[t(e,{href:"./structure"},{default:n(()=>[...s[24]||(s[24]=[i("项目结构与最佳实践",-1)])]),_:1})]),a("li",null,[t(e,{href:"./hot-reload"},{default:n(()=>[...s[25]||(s[25]=[i("热重载开发",-1)])]),_:1}),s[26]||(s[26]=i(" — 改代码即时生效，提升开发效率",-1))]),a("li",null,[t(e,{href:"./api/doc"},{default:n(()=>[...s[27]||(s[27]=[i("插件 API 参考",-1)])]),_:1})])]),t(o)])}const P=g(c,[["render",y]]);export{x as __pageData,P as default};
