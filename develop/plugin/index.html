<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>NapCat 插件开发概览 | NapCatQQ</title>
    <meta name="description" content="基于NTQQ现代化协议端Bot框架">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.qppx-uBn.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.87a06574.js"></script>
    <script type="module" src="/assets/app.CioTCe2z.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.BeKdlGsR.js">
    <link rel="modulepreload" href="/assets/chunks/theme.COYIFGtt.js">
    <link rel="modulepreload" href="/assets/chunks/katex.CBSAILhF.js">
    <link rel="modulepreload" href="/assets/chunks/dagre-6UL2VRFP.Bvku_XBX.js">
    <link rel="modulepreload" href="/assets/chunks/cose-bilkent-S5V4N54A.CpB8kOWW.js">
    <link rel="modulepreload" href="/assets/chunks/c4Diagram-YG6GDRKO.VwXoBLdv.js">
    <link rel="modulepreload" href="/assets/chunks/flowDiagram-NV44I4VS.BvHNPvC-.js">
    <link rel="modulepreload" href="/assets/chunks/erDiagram-Q2GNP2WA.EAQWYJwy.js">
    <link rel="modulepreload" href="/assets/chunks/gitGraphDiagram-NY62KEGX.CbVt8SEM.js">
    <link rel="modulepreload" href="/assets/chunks/ganttDiagram-JELNMOA3.D3En1JVW.js">
    <link rel="modulepreload" href="/assets/chunks/infoDiagram-WHAUD3N6.GJXX68Gi.js">
    <link rel="modulepreload" href="/assets/chunks/pieDiagram-ADFJNKIX.Dnzz1A63.js">
    <link rel="modulepreload" href="/assets/chunks/quadrantDiagram-AYHSOK5B.CngEuL2D.js">
    <link rel="modulepreload" href="/assets/chunks/xychartDiagram-PRI3JC2R.BUVgO1ZP.js">
    <link rel="modulepreload" href="/assets/chunks/requirementDiagram-UZGBJVZJ.D3RjRJIK.js">
    <link rel="modulepreload" href="/assets/chunks/sequenceDiagram-WL72ISMW.yMytkUrc.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-2ON5EDUG.stgCnIRX.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-v2-WZHVMYZB.stgCnIRX.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-FKZM4ZOC.no7NaGn-.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-v2-4FDKWEC3.CPRuqytr.js">
    <link rel="modulepreload" href="/assets/chunks/journeyDiagram-XKPGCS4Q.CEbUWzLQ.js">
    <link rel="modulepreload" href="/assets/chunks/timeline-definition-IT6M3QCI.txSToscd.js">
    <link rel="modulepreload" href="/assets/chunks/mindmap-definition-VGOIOE7T.BaoISKqC.js">
    <link rel="modulepreload" href="/assets/chunks/kanban-definition-3W4ZIXB7.DQWajf9q.js">
    <link rel="modulepreload" href="/assets/chunks/sankeyDiagram-TZEHDZUN.CmUIOP3M.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-S2PKOQOG.DD2RqUtK.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-QEK2KX5R.Rkh0E0P4.js">
    <link rel="modulepreload" href="/assets/chunks/blockDiagram-VD42YOAC.0MO68ZAS.js">
    <link rel="modulepreload" href="/assets/chunks/architectureDiagram-VXUJARFQ.BOrHDoOD.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-PSM6KHXK.C8jppbps.js">
    <link rel="modulepreload" href="/assets/chunks/virtual_mermaid-config.DDnGl6nM.js">
    <link rel="modulepreload" href="/assets/develop_plugin_index.md.D7XvhsnR.lean.js">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/newnewlogo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/newnewlogo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/newnewlogo.png">
    <link rel="mask-icon" href="/assets/newnewlogo.png" color="#5bbad5">
    <meta name="theme-color" content="#5f67ee">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-2c48374c><!--[--><!--[--><!--]--><!--]--><!--[--><span tabindex="-1" data-v-87b843e7></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-87b843e7>Skip to content</a><!--]--><!----><header class="VPNav" data-v-2c48374c data-v-fb19007f><div class="VPNavBar" data-v-fb19007f data-v-e95c15d4><div class="wrapper" data-v-e95c15d4><div class="container" data-v-e95c15d4><div class="title" data-v-e95c15d4><div class="VPNavBarTitle has-sidebar" data-v-e95c15d4 data-v-f6097aee><a class="title" href="/" data-v-f6097aee><!--[--><!--]--><!--[--><img class="VPImage logo" src="/assets/newnewlogo.png" width="24" height="24" alt data-v-0256067c><!--]--><span data-v-f6097aee>NapCatQQ</span><!--[--><!--]--></a></div></div><div class="content" data-v-e95c15d4><div class="content-body" data-v-e95c15d4><!--[--><!--]--><div class="VPNavBarSearch search" data-v-e95c15d4><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-e95c15d4 data-v-8b783473><span id="main-nav-aria-label" class="visually-hidden" data-v-8b783473> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/start-install" tabindex="0" data-v-8b783473 data-v-cdf75f5e><!--[--><span data-v-cdf75f5e>快速开始</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/other/about" tabindex="0" data-v-8b783473 data-v-cdf75f5e><!--[--><span data-v-cdf75f5e>关于</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-e95c15d4 data-v-de8fb74c><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-de8fb74c data-v-b80ae14c data-v-c75bc1aa><span class="check" data-v-c75bc1aa><span class="icon" data-v-c75bc1aa><!--[--><span class="vpi-sun sun" data-v-b80ae14c></span><span class="vpi-moon moon" data-v-b80ae14c></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-e95c15d4 data-v-7e3fd8bb data-v-5b80a4d9><!--[--><a class="VPSocialLink no-icon" href="https://github.com/NapNeko/NapCatQQ" aria-label="github" target="_blank" rel="noopener" data-v-5b80a4d9 data-v-8eb186bc><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-e95c15d4 data-v-e4851a68 data-v-e2c613d4><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-e2c613d4><span class="vpi-more-horizontal icon" data-v-e2c613d4></span></button><div class="menu" data-v-e2c613d4><div class="VPMenu" data-v-e2c613d4 data-v-44a1212e><!----><!--[--><!--[--><!----><div class="group" data-v-e4851a68><div class="item appearance" data-v-e4851a68><p class="label" data-v-e4851a68>主题</p><div class="appearance-action" data-v-e4851a68><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-e4851a68 data-v-b80ae14c data-v-c75bc1aa><span class="check" data-v-c75bc1aa><span class="icon" data-v-c75bc1aa><!--[--><span class="vpi-sun sun" data-v-b80ae14c></span><span class="vpi-moon moon" data-v-b80ae14c></span><!--]--></span></span></button></div></div></div><div class="group" data-v-e4851a68><div class="item social-links" data-v-e4851a68><div class="VPSocialLinks social-links-list" data-v-e4851a68 data-v-5b80a4d9><!--[--><a class="VPSocialLink no-icon" href="https://github.com/NapNeko/NapCatQQ" aria-label="github" target="_blank" rel="noopener" data-v-5b80a4d9 data-v-8eb186bc><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--[--><!--[--><div class="VPFlyout VPNolebaseEnhancedReadabilitiesMenu VPNolebaseEnhancedReadabilitiesMenuFlyout" aria-label="阅读增强" role="menuitem" data-v-e2c613d4><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e2c613d4><span class="text" data-v-e2c613d4><span class="i-icon-park-outline:book-open option-icon" data-v-e2c613d4></span><!----><span class="vpi-chevron-down text-icon" data-v-e2c613d4></span></span></button><div class="menu" data-v-e2c613d4><div class="VPMenu" data-v-e2c613d4 data-v-44a1212e><!----><!--[--><!--]--></div></div></div><!--]--><!--]--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-e95c15d4 data-v-91187410><span class="container" data-v-91187410><span class="top" data-v-91187410></span><span class="middle" data-v-91187410></span><span class="bottom" data-v-91187410></span></span></button></div></div></div></div><div class="divider" data-v-e95c15d4><div class="divider-line" data-v-e95c15d4></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-2c48374c data-v-76a1de1c><div class="container" data-v-76a1de1c><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-76a1de1c><span class="vpi-align-left menu-icon" data-v-76a1de1c></span><span class="menu-text" data-v-76a1de1c>菜单</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-76a1de1c data-v-534c9c12><button data-v-534c9c12>回到顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-2c48374c data-v-a50e714f><div class="curtain" data-v-a50e714f></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-a50e714f><span class="visually-hidden" id="sidebar-aria-label" data-v-a50e714f> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>快速开始</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/guide/start-install" data-v-7730524e><!--[--><p class="text" data-v-7730524e>目录导航</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/guide/napcat" data-v-7730524e><!--[--><p class="text" data-v-7730524e>什么是 NapCatQQ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/guide/install" data-v-7730524e><!--[--><p class="text" data-v-7730524e>启动方式</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible" data-v-7730524e data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h3 class="text" data-v-7730524e>安装方式</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/guide/boot/Shell" data-v-7730524e><!--[--><p class="text" data-v-7730524e>Shell</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/guide/boot/Framework" data-v-7730524e><!--[--><p class="text" data-v-7730524e>Framework</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>配置</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/config/basic" data-v-7730524e><!--[--><p class="text" data-v-7730524e>基础配置</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/config/advanced" data-v-7730524e><!--[--><p class="text" data-v-7730524e>高级配置</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>使用</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/use/integration" data-v-7730524e><!--[--><p class="text" data-v-7730524e>接入框架</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/use/community" data-v-7730524e><!--[--><p class="text" data-v-7730524e>社区资源</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>开发</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/api" data-v-7730524e><!--[--><p class="text" data-v-7730524e>请求接口</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/event" data-v-7730524e><!--[--><p class="text" data-v-7730524e>上报事件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/msg" data-v-7730524e><!--[--><p class="text" data-v-7730524e>消息类型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/file" data-v-7730524e><!--[--><p class="text" data-v-7730524e>处理文件</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible" data-v-7730524e data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h3 class="text" data-v-7730524e>插件开发</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/mechanism" data-v-7730524e><!--[--><p class="text" data-v-7730524e>插件机制原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/index" data-v-7730524e><!--[--><p class="text" data-v-7730524e>快速开始</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/structure" data-v-7730524e><!--[--><p class="text" data-v-7730524e>项目结构</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/start-webui" data-v-7730524e><!--[--><p class="text" data-v-7730524e>配置与 WebUI</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/advanced" data-v-7730524e><!--[--><p class="text" data-v-7730524e>进阶功能</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/hot-reload" data-v-7730524e><!--[--><p class="text" data-v-7730524e>热重载开发</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/publish" data-v-7730524e><!--[--><p class="text" data-v-7730524e>发布插件</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-2 collapsible" data-v-7730524e data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h4 class="text" data-v-7730524e>API 参考</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-3 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/api/doc" data-v-7730524e><!--[--><p class="text" data-v-7730524e>API 文档</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/api/type" data-v-7730524e><!--[--><p class="text" data-v-7730524e>类型定义</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-7730524e data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h3 class="text" data-v-7730524e>完整接口定义</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/api/doc" data-v-7730524e><!--[--><p class="text" data-v-7730524e>接口</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/api/type" data-v-7730524e><!--[--><p class="text" data-v-7730524e>类型</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>API 文档</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/api/" data-v-7730524e><!--[--><p class="text" data-v-7730524e>版本选择</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>协议</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/index" data-v-7730524e><!--[--><p class="text" data-v-7730524e>协议概述</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/network" data-v-7730524e><!--[--><p class="text" data-v-7730524e>网络通讯</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/basic_event" data-v-7730524e><!--[--><p class="text" data-v-7730524e>事件基础结构</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/event" data-v-7730524e><!--[--><p class="text" data-v-7730524e>事件字段详情</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/api" data-v-7730524e><!--[--><p class="text" data-v-7730524e>接口基础接口</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/sement" data-v-7730524e><!--[--><p class="text" data-v-7730524e>消息元素定义</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/napcat" data-v-7730524e><!--[--><p class="text" data-v-7730524e>差异实现说明</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>其余</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/other/napcat" data-v-7730524e><!--[--><p class="text" data-v-7730524e>喵喵</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/other/security" data-v-7730524e><!--[--><p class="text" data-v-7730524e>安全</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/other/about" data-v-7730524e><!--[--><p class="text" data-v-7730524e>联系</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-2c48374c data-v-c0a84ade><div class="VPDoc has-sidebar has-aside" data-v-c0a84ade data-v-4f95a2d9><!--[--><!--]--><div class="container" data-v-4f95a2d9><div class="aside" data-v-4f95a2d9><div class="aside-curtain" data-v-4f95a2d9></div><div class="aside-container" data-v-4f95a2d9><div class="aside-content" data-v-4f95a2d9><div class="VPDocAside" data-v-4f95a2d9 data-v-076103c5><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-076103c5 data-v-04df5ada><div class="content" data-v-04df5ada><div class="outline-marker" data-v-04df5ada></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-04df5ada>页面导航</div><ul class="VPDocOutlineItem root" data-v-04df5ada data-v-2f583807><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-076103c5></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-4f95a2d9><div class="content-container" data-v-4f95a2d9><!--[--><!--]--><main class="main" data-v-4f95a2d9><div style="position:relative;" class="vp-doc _develop_plugin_" data-v-4f95a2d9><div><h1 id="napcat-插件开发概览" tabindex="-1">NapCat 插件开发概览 <a class="header-anchor" href="#napcat-插件开发概览" aria-label="Permalink to &quot;NapCat 插件开发概览&quot;">​</a></h1><div my-4 class="vp-nolebase-page-properties vp-nolebase-page-properties-container"><div class="vp-nolebase-page-properties-grid grid grid-cols-[180px_auto] gap-1 &lt;sm:grid-cols-[120px_auto]"><!--[--><!--[--><div transition="all ease-in-out" flex items-start text="zinc-400 dark:zinc-500 sm &lt;sm:xs" duration-250><div transition="all ease-in-out" min-h="8 &lt;sm:7" px="2 &lt;sm:1" py="2 &lt;sm:1" w-full flex cursor-pointer items-center bg="hover:zinc-100 dark:hover:zinc-800" rounded-md duration-250><div i-icon-park-outline:add-text mr-1></div><span overflow-hidden text-ellipsis whitespace-nowrap>字数</span></div></div><div cursor-pointer transition="all ease-in-out" min-h="8 &lt;sm:7" px="2 &lt;sm:1" py="1.5 &lt;sm:1" flex="~ row wrap" items-center gap-1 rounded-md text="sm &lt;sm:xs" bg="hover:zinc-100 dark:hover:zinc-800" duration-250><div class="vp-nolebase-page-property" data-page-property="value" data-page-property-type="dynamic" data-page-property-dynamic-type="word-count" w-full inline-flex items-center><span>2659 字</span></div></div><!--]--><!--[--><div transition="all ease-in-out" flex items-start text="zinc-400 dark:zinc-500 sm &lt;sm:xs" duration-250><div transition="all ease-in-out" min-h="8 &lt;sm:7" px="2 &lt;sm:1" py="2 &lt;sm:1" w-full flex cursor-pointer items-center bg="hover:zinc-100 dark:hover:zinc-800" rounded-md duration-250><div i-icon-park-outline:timer mr-1></div><span overflow-hidden text-ellipsis whitespace-nowrap>阅读时间</span></div></div><div cursor-pointer transition="all ease-in-out" min-h="8 &lt;sm:7" px="2 &lt;sm:1" py="1.5 &lt;sm:1" flex="~ row wrap" items-center gap-1 rounded-md text="sm &lt;sm:xs" bg="hover:zinc-100 dark:hover:zinc-800" duration-250><div class="vp-nolebase-page-property" data-page-property="value" data-page-property-type="dynamic" data-page-property-dynamic-type="reading-time" w-full inline-flex items-center><span>12 分钟</span></div></div><!--]--><!--]--></div></div><p>NapCat 提供了一套灵活的插件系统，支持开发者扩展 Bot 的功能。本文档介绍 NapCat 插件的开发流程。</p><div class="tip custom-block"><p class="custom-block-title">前置知识</p><p>如果你还不了解 NapCat 插件系统的工作原理，建议先阅读 <a class="VPNolebaseInlinePreviewLink" relative href="./mechanism" data-v-2731f906><!--[-->插件机制原理<!--]--><!----></a>。</p></div><div class="tip custom-block"><p class="custom-block-title">说明</p><p>推荐使用 <a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/NapNeko/napcat-plugin-template" target="_blank" rel="noreferrer" data-v-2731f906><!--[-->napcat-plugin-template<!--]--><!----></a> 模板仓库快速开始开发。</p></div><h2 id="开发前准备" tabindex="-1">开发前准备 <a class="header-anchor" href="#开发前准备" aria-label="Permalink to &quot;开发前准备&quot;">​</a></h2><p>在开始开发之前，你需要了解以下资源：</p><ul><li><strong><a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/NapNeko/napcat-plugin-template" target="_blank" rel="noreferrer" data-v-2731f906><!--[-->napcat-plugin-template<!--]--><!----></a></strong>: 官方提供的插件开发模板，内置了构建流程和 CI/CD，推荐使用。</li><li><strong><a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/NapNeko/napcat-plugin-index" target="_blank" rel="noreferrer" data-v-2731f906><!--[-->napcat-plugin-index<!--]--><!----></a></strong>: 插件索引仓库，发布后的插件会收录在这里。</li></ul><h2 id="快速开始" tabindex="-1">快速开始 <a class="header-anchor" href="#快速开始" aria-label="Permalink to &quot;快速开始&quot;">​</a></h2><h3 id="_1-使用模板创建项目" tabindex="-1">1. 使用模板创建项目 <a class="header-anchor" href="#_1-使用模板创建项目" aria-label="Permalink to &quot;1. 使用模板创建项目&quot;">​</a></h3><p>最简单的方式是直接通过 <a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/NapNeko/napcat-plugin-template" target="_blank" rel="noreferrer" data-v-2731f906><!--[-->napcat-plugin-template<!--]--><!----></a> 创建你的 GitHub 仓库。该模板提供了完整的开发环境配置，包括 TypeScript 支持、构建脚本以及 CI/CD 流程。</p><h3 id="_2-项目结构说明" tabindex="-1">2. 项目结构说明 <a class="header-anchor" href="#_2-项目结构说明" aria-label="Permalink to &quot;2. 项目结构说明&quot;">​</a></h3><p>一个标准的 NapCat 插件项目结构如下 (以模板为例)：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>napcat-plugin-template/</span></span>
<span class="line"><span>├── src/</span></span>
<span class="line"><span>│   ├── index.ts              # 插件主入口，负责导出生命周期函数</span></span>
<span class="line"><span>│   ├── config.ts             # 配置文件定义及 WebUI Schema</span></span>
<span class="line"><span>│   ├── types.ts              # TypeScript 类型定义</span></span>
<span class="line"><span>│   ├── core/</span></span>
<span class="line"><span>│   │   └── state.ts          # 全局状态管理</span></span>
<span class="line"><span>│   ├── handlers/             # 业务逻辑处理模块</span></span>
<span class="line"><span>│   │   └── message-handler.ts # 示例：消息处理器</span></span>
<span class="line"><span>│   ├── services/             # 服务层，API 路由等</span></span>
<span class="line"><span>│   └── webui/                # (可选) 插件的 WebUI 前端代码</span></span>
<span class="line"><span>├── package.json              # 项目依赖及元数据</span></span>
<span class="line"><span>└── tsconfig.json             # TypeScript 配置</span></span></code></pre></div><h2 id="编写核心逻辑" tabindex="-1">编写核心逻辑 <a class="header-anchor" href="#编写核心逻辑" aria-label="Permalink to &quot;编写核心逻辑&quot;">​</a></h2><p>在 <code>src/index.ts</code> 中，你需要导出插件的生命周期函数。这是插件被 NapCat 加载时执行的入口点。请务必遵循 NapCat 的生命周期。</p><h3 id="插件入口-src-index-ts" tabindex="-1">插件入口 (<code>src/index.ts</code>) <a class="header-anchor" href="#插件入口-src-index-ts" aria-label="Permalink to &quot;插件入口 (`src/index.ts`)&quot;">​</a></h3><p>插件需要导出 <code>PluginModule</code> 接口中定义的生命周期函数。其中 <code>plugin_init</code> 是唯一必选的函数。</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { PluginModule, OB11Message, OB11PostSendMsg } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;napcat-types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { EventType } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;napcat-types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1. 插件初始化（必选）</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 插件加载时调用，用于初始化资源、注册路由等</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> plugin_init</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PluginModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;plugin_init&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;My Plugin has been initialized!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 初始化时可以做一些准备工作</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2. 消息处理（可选）</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 收到事件时调用，需要通过 post_type 判断是否为消息事件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> plugin_onmessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PluginModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;plugin_onmessage&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 过滤非消息事件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (event.post_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EventType.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MESSAGE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 简单的 Ping-Pong 示例</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (event.raw_message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ping&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ctx.logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`收到来自 ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">event</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user_id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} 的 ping`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 构造发送消息的参数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> params</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OB11PostSendMsg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            message: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;pong&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            message_type: event.message_type,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event.message_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;group&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event.group_id</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { group_id: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event.group_id) }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                :</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event.message_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;private&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event.user_id</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { user_id: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event.user_id) }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                :</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        };</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 通过 actions 调用 OneBot11 Action (需传入 adapter 和 config)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctx.actions.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;send_msg&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, params, ctx.adapterName, ctx.pluginManager.config);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3. 事件处理（可选）</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 处理所有 OneBot 事件（包括通知、请求等）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> plugin_onevent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PluginModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;plugin_onevent&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;收到事件:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, event);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 4. 插件卸载（可选）</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 插件重载或卸载时调用，必须清理定时器、关闭连接等</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> plugin_cleanup</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PluginModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;plugin_cleanup&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;My Plugin is cleaning up...&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 清理资源</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">关于 actions.call 调用</p><p><code>ctx.actions.call(actionName, params, adapter, config)</code> 需要 4 个参数：</p><ul><li><code>actionName</code>: OneBot11 Action 名称（如 <code>&#39;send_msg&#39;</code>、<code>&#39;get_login_info&#39;</code> 等）</li><li><code>params</code>: 请求参数</li><li><code>adapter</code>: 适配器名称，使用 <code>ctx.adapterName</code></li><li><code>config</code>: 网络配置，使用 <code>ctx.pluginManager.config</code></li></ul></div><h3 id="生命周期函数一览" tabindex="-1">生命周期函数一览 <a class="header-anchor" href="#生命周期函数一览" aria-label="Permalink to &quot;生命周期函数一览&quot;">​</a></h3><table tabindex="0"><thead><tr><th>函数名</th><th>是否必选</th><th>说明</th></tr></thead><tbody><tr><td><code>plugin_init</code></td><td>必选</td><td>插件加载时调用，用于初始化</td></tr><tr><td><code>plugin_onmessage</code></td><td>可选</td><td>收到事件时调用（需通过 <code>post_type</code> 判断事件类型）</td></tr><tr><td><code>plugin_onevent</code></td><td>可选</td><td>收到所有 OneBot 事件时调用</td></tr><tr><td><code>plugin_cleanup</code></td><td>可选</td><td>插件卸载/重载时调用</td></tr><tr><td><code>plugin_config_schema</code></td><td>可选</td><td>导出配置 Schema（同 <code>plugin_config_ui</code>）</td></tr><tr><td><code>plugin_config_ui</code></td><td>可选</td><td>导出配置 Schema，用于在 WebUI 生成配置面板</td></tr><tr><td><code>plugin_get_config</code></td><td>可选</td><td>获取插件配置的自定义实现</td></tr><tr><td><code>plugin_set_config</code></td><td>可选</td><td>保存插件配置的自定义实现</td></tr><tr><td><code>plugin_config_controller</code></td><td>可选</td><td>配置 UI 控制器，用于动态控制配置界面</td></tr><tr><td><code>plugin_on_config_change</code></td><td>可选</td><td>配置变更时触发的回调</td></tr></tbody></table><h3 id="消息处理的最佳实践" tabindex="-1">消息处理的最佳实践 <a class="header-anchor" href="#消息处理的最佳实践" aria-label="Permalink to &quot;消息处理的最佳实践&quot;">​</a></h3><p>为了保持代码整洁，建议将复杂的业务逻辑分离到 <code>src/handlers</code> 目录下的独立文件中，而不是全部写在 <code>plugin_onmessage</code> 里。</p><p>例如创建 <code>src/handlers/message.ts</code>：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { NapCatPluginContext, OB11Message, OB11PostSendMsg } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;napcat-types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleGroupMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NapCatPluginContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OB11Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">raw_message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">group_id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> message;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 封装发送群消息的辅助函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sendGroupMsg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> params</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OB11PostSendMsg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      message: text,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      message_type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;group&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      group_id: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(group_id),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctx.actions.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;send_msg&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, params, ctx.adapterName, ctx.pluginManager.config);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 示例：简单的关键词回复</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (raw_message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;喵&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sendGroupMsg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;喵喵喵？&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 示例：调用 OneBot 11 Action</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (raw_message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;#info&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> loginInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctx.actions.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       &#39;get_login_info&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ctx.adapterName, ctx.pluginManager.config</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     );</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">     await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sendGroupMsg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`当前登录账号: ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loginInfo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nickname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} (${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loginInfo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user_id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">})`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>然后在 <code>index.ts</code> 中引入使用：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { PluginModule } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;napcat-types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { EventType } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;napcat-types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { handleGroupMessage } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./handlers/message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> plugin_onmessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PluginModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;plugin_onmessage&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (event.post_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EventType.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MESSAGE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (event.message_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;group&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleGroupMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctx, event);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h3 id="napcatplugincontext-核心属性" tabindex="-1">NapCatPluginContext 核心属性 <a class="header-anchor" href="#napcatplugincontext-核心属性" aria-label="Permalink to &quot;NapCatPluginContext 核心属性&quot;">​</a></h3><p><code>NapCatPluginContext</code> 是插件开发中最重要的上下文对象，包含以下属性：</p><ul><li><strong><code>ctx.core</code></strong>: <code>NapCatCore</code> 实例，底层核心。</li><li><strong><code>ctx.oneBot</code></strong>: <code>NapCatOneBot11Adapter</code> 实例，OneBot11 适配器。</li><li><strong><code>ctx.actions</code></strong>: <code>ActionMap</code> 对象，通过 <code>ctx.actions.call(actionName, params, ctx.adapterName, ctx.pluginManager.config)</code> 调用 OneBot11 Action。</li><li><strong><code>ctx.pluginName</code></strong>: 当前插件名称。</li><li><strong><code>ctx.pluginPath</code></strong>: 插件所在目录路径。</li><li><strong><code>ctx.configPath</code></strong>: 插件配置文件路径。</li><li><strong><code>ctx.dataPath</code></strong>: 插件数据存储目录路径。</li><li><strong><code>ctx.NapCatConfig</code></strong>: 配置构建工具类，提供 <code>text</code>/<code>number</code>/<code>boolean</code>/<code>select</code> 等静态方法。</li><li><strong><code>ctx.adapterName</code></strong>: 适配器名称。</li><li><strong><code>ctx.pluginManager</code></strong>: 插件管理器，支持查询/启停其他插件。</li><li><strong><code>ctx.logger</code></strong>: 使用 NapCat 内置的日志系统，保持日志格式统一。</li><li><strong><code>ctx.router</code></strong>: 路由注册器，用于注册 API 路由、页面和静态文件。</li><li><strong><code>ctx.getPluginExports(pluginId)</code></strong>: 获取其他已加载插件的导出对象。</li></ul><h2 id="配置文件" tabindex="-1">配置文件 <a class="header-anchor" href="#配置文件" aria-label="Permalink to &quot;配置文件&quot;">​</a></h2><p>NapCat 插件支持通过导出 <code>plugin_config_ui</code> 或 <code>plugin_config_schema</code> 来定义配置项。这允许用户在 WebUI 中修改插件的设置。</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { PluginConfigSchema } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;napcat-types&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> plugin_config_ui</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PluginConfigSchema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    key: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;enable&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;启用插件&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;boolean&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    default: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    description: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;是否启用本插件的核心功能&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    key: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;prefix&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;命令前缀&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;string&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    default: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    placeholder: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;请输入命令前缀，例如 / 或 #&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    description: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;触发命令的前缀符号&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span></code></pre></div><h2 id="webui-开发-可选" tabindex="-1">WebUI 开发 (可选) <a class="header-anchor" href="#webui-开发-可选" aria-label="Permalink to &quot;WebUI 开发 (可选)&quot;">​</a></h2><p>如果插件需要提供图形化界面，可以在 <code>src/webui</code> 目录下进行 React 开发。模板中已经配置好了 Vite 构建脚本，运行 <code>npm run build</code> 时，构建后的静态资源会被自动打包进插件中，用户可以通过 NapCat 的管理界面访问。</p><h2 id="发布插件" tabindex="-1">发布插件 <a class="header-anchor" href="#发布插件" aria-label="Permalink to &quot;发布插件&quot;">​</a></h2><h3 id="发布插件流程" tabindex="-1">发布插件流程 <a class="header-anchor" href="#发布插件流程" aria-label="Permalink to &quot;发布插件流程&quot;">​</a></h3><ol><li><strong>配置 <code>package.json</code></strong>: 确保你的 <code>package.json</code> 包含正确的插件元数据：<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;napcat-plugin-your-plugin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;plugin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;我的插件&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;index.mjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;这是我的 NapCat 插件&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;author&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;YourName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;napcat&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;tags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;工具&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;娱乐&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;minVersion&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;4.14.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;homepage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://github.com/yourname/napcat-plugin-your-plugin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><strong>发布版本</strong>: 推送 <code>v*</code> 格式的 Git Tag (例如 <code>v1.0.0</code>) 到你的远程仓库。</li><li><strong>CI/CD 自动发布</strong>: 如果你基于模板开发并配置了 Secret，GitHub Actions 会自动构建并发布 Release。</li><li><strong>提交索引</strong>: 同时 CI 会自动向 <a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/NapNeko/napcat-plugin-index" target="_blank" rel="noreferrer" data-v-2731f906><!--[-->napcat-plugin-index<!--]--><!----></a> 提交 PR。等待维护者审核合并后，你的插件就会出现在 NapCat 的插件市场中供用户下载。</li></ol><h2 id="自动化发布-ci-cd" tabindex="-1">自动化发布 (CI/CD) <a class="header-anchor" href="#自动化发布-ci-cd" aria-label="Permalink to &quot;自动化发布 (CI/CD)&quot;">​</a></h2><p>NapCat 插件模板内置了 GitHub Actions 工作流，可自动完成构建、发布 Release 以及提交到插件市场的全过程。</p><h3 id="工作流介绍" tabindex="-1">工作流介绍 <a class="header-anchor" href="#工作流介绍" aria-label="Permalink to &quot;工作流介绍&quot;">​</a></h3><p>模板仓库包含两个主要的工作流文件：</p><ol><li><p><strong><code>release.yml</code></strong>: 负责插件的构建和 Release 发布。</p><ul><li><strong>触发条件</strong>: 当你推送 <code>v*</code> 格式的 tag (如 <code>v1.0.0</code>) 时自动触发。</li><li><strong>主要任务</strong>: <ul><li>安装依赖 (<code>pnpm install</code>)</li><li>构建插件 (<code>npm run build</code>)</li><li>打包构建产物为 <code>.zip</code> 文件</li><li>创建 GitHub Release 并上传 <code>.zip</code> 包</li></ul></li></ul></li><li><p><strong><code>update-index.yml</code></strong>: 负责将发布后的插件自动提交到 <a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/NapNeko/napcat-plugin-index" target="_blank" rel="noreferrer" data-v-2731f906><!--[-->NapCat 插件索引仓库<!--]--><!----></a>。</p><ul><li><strong>触发条件</strong>: 当 <code>release.yml</code> 成功发布 Release 后触发。</li><li><strong>主要任务</strong>: <ul><li>抓取 <code>package.json</code> 中的插件元数据 (版本、描述、作者等)</li><li>向 NapCat 插件索引仓库提交 Pull Request (PR)</li><li>等待仓库维护者审核合并</li></ul></li></ul></li></ol><h3 id="配置步骤" tabindex="-1">配置步骤 <a class="header-anchor" href="#配置步骤" aria-label="Permalink to &quot;配置步骤&quot;">​</a></h3><p>为了让自动提交索引的功能正常工作，你需要进行少量的配置：</p><h4 id="_1-设置-repository-secret" tabindex="-1">1. 设置 Repository Secret <a class="header-anchor" href="#_1-设置-repository-secret" aria-label="Permalink to &quot;1. 设置 Repository Secret&quot;">​</a></h4><p>由于 GitHub Actions 默认权限无法跨仓库提交 PR，你需要提供一个具有权限的 Token。</p><ol><li><p><strong>生成 Token</strong>:</p><ul><li>访问 <a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/settings/tokens" target="_blank" rel="noreferrer" data-v-2731f906><!--[-->GitHub Developer Settings<!--]--><!----></a></li><li>生成一个新的 <strong>Personal Access Token (Classic)</strong></li><li>勾选 <code>public_repo</code> (对于公开仓库) 权限</li><li>复制生成的 Token</li></ul></li><li><p><strong>配置 Secret</strong>:</p><ul><li>进入你的插件仓库 -&gt; <code>Settings</code> -&gt; <code>Secrets and variables</code> -&gt; <code>Actions</code></li><li>点击 <code>New repository secret</code></li><li>Name: <code>INDEX_PAT</code> (必须完全一致)</li><li>Value: 粘贴刚才复制的 Token</li><li>点击 <code>Add secret</code> 保存</li></ul></li></ol><h4 id="_2-完善-package-json" tabindex="-1">2. 完善 <code>package.json</code> <a class="header-anchor" href="#_2-完善-package-json" aria-label="Permalink to &quot;2. 完善 `package.json`&quot;">​</a></h4><p>自动化脚本会从 <code>package.json</code> 读取插件信息，请务必完整填写：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;napcat-plugin-demo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 插件ID (必须以 napcat-plugin- 开头)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;plugin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;插件显示名称&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 插件在 WebUI 中的显示名称</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,                 </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 版本号</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;index.mjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,                </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 入口文件</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;这是插件描述&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 插件描述</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;author&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;YourName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,               </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 作者</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;napcat&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;tags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;工具&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;娱乐&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 插件标签</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;minVersion&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;4.14.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 最低支持的 NapCat 版本</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;homepage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://...&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         // 项目主页</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="完整的发布操作" tabindex="-1">完整的发布操作 <a class="header-anchor" href="#完整的发布操作" aria-label="Permalink to &quot;完整的发布操作&quot;">​</a></h3><p>配置完成后，发布新版本的流程如下：</p><ol><li><strong>修改版本号</strong>: 更新 <code>package.json</code> 中的 <code>version</code> 字段 (例如 <code>1.0.1</code>)。</li><li><strong>提交代码</strong>: 将修改推送到 GitHub。</li><li><strong>打标签</strong>:<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tag</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1.0.1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1.0.1</span></span></code></pre></div></li><li><strong>等待执行</strong>: <ul><li>GitHub Actions 会自动运行 <code>release.yml</code> 构建并发布 Release。</li><li>随后触发 <code>update-index.yml</code>，自动向官方索引仓库提交 PR。</li></ul></li><li><strong>完成</strong>: 等待 PR 被合并后，插件将收录至 NapCat 插件市场。</li></ol><h2 id="另请参阅" tabindex="-1">另请参阅 <a class="header-anchor" href="#另请参阅" aria-label="Permalink to &quot;另请参阅&quot;">​</a></h2><ul><li><a class="VPNolebaseInlinePreviewLink" relative href="./hot-reload" data-v-2731f906><!--[-->热重载开发<!--]--><!----></a> — 使用调试服务实现改代码即时生效，无需重启 NapCat</li><li><a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/NapNeko/napcat-plugin-template" target="_blank" rel="noreferrer" data-v-2731f906><!--[-->NapCat 插件模板<!--]--><!----></a></li><li><a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/NapNeko/napcat-plugin-index" target="_blank" rel="noreferrer" data-v-2731f906><!--[-->NapCat 插件索引<!--]--><!----></a></li></ul></div></div></main><footer class="VPDocFooter" data-v-4f95a2d9 data-v-ebefe59e><!--[--><!--]--><div class="edit-info" data-v-ebefe59e><div class="edit-link" data-v-ebefe59e><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/NapNeko/NapCatDocs/edit/main/src/develop/plugin/index.md" target="_blank" rel="noreferrer" data-v-ebefe59e><!--[--><span class="vpi-square-pen edit-link-icon" data-v-ebefe59e></span> 在 GitHub 上编辑此页面<!--]--></a></div><div class="last-updated" data-v-ebefe59e><p class="VPLastUpdated" data-v-ebefe59e data-v-0123dd20>最后更新于: <time datetime="2026-02-08T11:34:32.000Z" data-v-0123dd20></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-ebefe59e><span class="visually-hidden" id="doc-footer-aria-label" data-v-ebefe59e>Pager</span><div class="pager" data-v-ebefe59e><!----></div><div class="pager" data-v-ebefe59e><a class="VPLink link pager-link next" href="/guide/start-install" data-v-ebefe59e><!--[--><span class="desc" data-v-ebefe59e>下一页</span><span class="title" data-v-ebefe59e>目录导航</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!----><!--]--></div></div>
    
    
  </body>
</html>