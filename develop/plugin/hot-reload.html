<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>热重载开发 | NapCatQQ</title>
    <meta name="description" content="基于NTQQ现代化协议端Bot框架">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.qppx-uBn.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.8948bd76.js"></script>
    <script type="module" src="/assets/app.DRXkn-dz.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.BeKdlGsR.js">
    <link rel="modulepreload" href="/assets/chunks/theme.BfMohrn9.js">
    <link rel="modulepreload" href="/assets/chunks/katex.CBSAILhF.js">
    <link rel="modulepreload" href="/assets/chunks/dagre-6UL2VRFP.DFCOIHZC.js">
    <link rel="modulepreload" href="/assets/chunks/cose-bilkent-S5V4N54A.D-PYqrK0.js">
    <link rel="modulepreload" href="/assets/chunks/c4Diagram-YG6GDRKO.D19U7nU2.js">
    <link rel="modulepreload" href="/assets/chunks/flowDiagram-NV44I4VS.DmFNtw7T.js">
    <link rel="modulepreload" href="/assets/chunks/erDiagram-Q2GNP2WA.CPrDKWaU.js">
    <link rel="modulepreload" href="/assets/chunks/gitGraphDiagram-NY62KEGX.eCRxjp1V.js">
    <link rel="modulepreload" href="/assets/chunks/ganttDiagram-JELNMOA3.CT-0f7OG.js">
    <link rel="modulepreload" href="/assets/chunks/infoDiagram-WHAUD3N6.Bd63D2Kw.js">
    <link rel="modulepreload" href="/assets/chunks/pieDiagram-ADFJNKIX.CBfRzmst.js">
    <link rel="modulepreload" href="/assets/chunks/quadrantDiagram-AYHSOK5B.DoArxNJh.js">
    <link rel="modulepreload" href="/assets/chunks/xychartDiagram-PRI3JC2R.B1Z-YI7L.js">
    <link rel="modulepreload" href="/assets/chunks/requirementDiagram-UZGBJVZJ.B4ROf_7h.js">
    <link rel="modulepreload" href="/assets/chunks/sequenceDiagram-WL72ISMW.Cb4vFpX7.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-2ON5EDUG.DqIkKeTd.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-v2-WZHVMYZB.DqIkKeTd.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-FKZM4ZOC.DiBBsC2I.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-v2-4FDKWEC3.C7HsO-mD.js">
    <link rel="modulepreload" href="/assets/chunks/journeyDiagram-XKPGCS4Q.Dt4PsMiE.js">
    <link rel="modulepreload" href="/assets/chunks/timeline-definition-IT6M3QCI.CKdJ5-Kw.js">
    <link rel="modulepreload" href="/assets/chunks/mindmap-definition-VGOIOE7T.B6Se6AMc.js">
    <link rel="modulepreload" href="/assets/chunks/kanban-definition-3W4ZIXB7.0Txnepwc.js">
    <link rel="modulepreload" href="/assets/chunks/sankeyDiagram-TZEHDZUN.BFGOQmfK.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-S2PKOQOG.Cwsy_XZv.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-QEK2KX5R.BZ4Cq0-B.js">
    <link rel="modulepreload" href="/assets/chunks/blockDiagram-VD42YOAC.C0ClNZQa.js">
    <link rel="modulepreload" href="/assets/chunks/architectureDiagram-VXUJARFQ.C-LL5WVv.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-PSM6KHXK.CFnBAA2p.js">
    <link rel="modulepreload" href="/assets/chunks/virtual_mermaid-config.DDnGl6nM.js">
    <link rel="modulepreload" href="/assets/develop_plugin_hot-reload.md.BJY7ITeO.lean.js">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/newnewlogo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/newnewlogo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/newnewlogo.png">
    <link rel="mask-icon" href="/assets/newnewlogo.png" color="#5bbad5">
    <meta name="theme-color" content="#5f67ee">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-2c48374c><!--[--><!--[--><!--]--><!--]--><!--[--><span tabindex="-1" data-v-87b843e7></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-87b843e7>Skip to content</a><!--]--><!----><header class="VPNav" data-v-2c48374c data-v-fb19007f><div class="VPNavBar" data-v-fb19007f data-v-e95c15d4><div class="wrapper" data-v-e95c15d4><div class="container" data-v-e95c15d4><div class="title" data-v-e95c15d4><div class="VPNavBarTitle has-sidebar" data-v-e95c15d4 data-v-f6097aee><a class="title" href="/" data-v-f6097aee><!--[--><!--]--><!--[--><img class="VPImage logo" src="/assets/newnewlogo.png" width="24" height="24" alt data-v-0256067c><!--]--><span data-v-f6097aee>NapCatQQ</span><!--[--><!--]--></a></div></div><div class="content" data-v-e95c15d4><div class="content-body" data-v-e95c15d4><!--[--><!--]--><div class="VPNavBarSearch search" data-v-e95c15d4><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-e95c15d4 data-v-8b783473><span id="main-nav-aria-label" class="visually-hidden" data-v-8b783473> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/start-install" tabindex="0" data-v-8b783473 data-v-cdf75f5e><!--[--><span data-v-cdf75f5e>快速开始</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/other/about" tabindex="0" data-v-8b783473 data-v-cdf75f5e><!--[--><span data-v-cdf75f5e>关于</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-e95c15d4 data-v-de8fb74c><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-de8fb74c data-v-b80ae14c data-v-c75bc1aa><span class="check" data-v-c75bc1aa><span class="icon" data-v-c75bc1aa><!--[--><span class="vpi-sun sun" data-v-b80ae14c></span><span class="vpi-moon moon" data-v-b80ae14c></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-e95c15d4 data-v-7e3fd8bb data-v-5b80a4d9><!--[--><a class="VPSocialLink no-icon" href="https://github.com/NapNeko/NapCatQQ" aria-label="github" target="_blank" rel="noopener" data-v-5b80a4d9 data-v-8eb186bc><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-e95c15d4 data-v-e4851a68 data-v-e2c613d4><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-e2c613d4><span class="vpi-more-horizontal icon" data-v-e2c613d4></span></button><div class="menu" data-v-e2c613d4><div class="VPMenu" data-v-e2c613d4 data-v-44a1212e><!----><!--[--><!--[--><!----><div class="group" data-v-e4851a68><div class="item appearance" data-v-e4851a68><p class="label" data-v-e4851a68>主题</p><div class="appearance-action" data-v-e4851a68><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-e4851a68 data-v-b80ae14c data-v-c75bc1aa><span class="check" data-v-c75bc1aa><span class="icon" data-v-c75bc1aa><!--[--><span class="vpi-sun sun" data-v-b80ae14c></span><span class="vpi-moon moon" data-v-b80ae14c></span><!--]--></span></span></button></div></div></div><div class="group" data-v-e4851a68><div class="item social-links" data-v-e4851a68><div class="VPSocialLinks social-links-list" data-v-e4851a68 data-v-5b80a4d9><!--[--><a class="VPSocialLink no-icon" href="https://github.com/NapNeko/NapCatQQ" aria-label="github" target="_blank" rel="noopener" data-v-5b80a4d9 data-v-8eb186bc><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--[--><!--[--><div class="VPFlyout VPNolebaseEnhancedReadabilitiesMenu VPNolebaseEnhancedReadabilitiesMenuFlyout" aria-label="阅读增强" role="menuitem" data-v-e2c613d4><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e2c613d4><span class="text" data-v-e2c613d4><span class="i-icon-park-outline:book-open option-icon" data-v-e2c613d4></span><!----><span class="vpi-chevron-down text-icon" data-v-e2c613d4></span></span></button><div class="menu" data-v-e2c613d4><div class="VPMenu" data-v-e2c613d4 data-v-44a1212e><!----><!--[--><!--]--></div></div></div><!--]--><!--]--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-e95c15d4 data-v-91187410><span class="container" data-v-91187410><span class="top" data-v-91187410></span><span class="middle" data-v-91187410></span><span class="bottom" data-v-91187410></span></span></button></div></div></div></div><div class="divider" data-v-e95c15d4><div class="divider-line" data-v-e95c15d4></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-2c48374c data-v-76a1de1c><div class="container" data-v-76a1de1c><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-76a1de1c><span class="vpi-align-left menu-icon" data-v-76a1de1c></span><span class="menu-text" data-v-76a1de1c>菜单</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-76a1de1c data-v-534c9c12><button data-v-534c9c12>回到顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-2c48374c data-v-a50e714f><div class="curtain" data-v-a50e714f></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-a50e714f><span class="visually-hidden" id="sidebar-aria-label" data-v-a50e714f> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>快速开始</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/guide/start-install" data-v-7730524e><!--[--><p class="text" data-v-7730524e>目录导航</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/guide/napcat" data-v-7730524e><!--[--><p class="text" data-v-7730524e>什么是 NapCatQQ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/guide/install" data-v-7730524e><!--[--><p class="text" data-v-7730524e>启动方式</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible" data-v-7730524e data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h3 class="text" data-v-7730524e>安装方式</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/guide/boot/Shell" data-v-7730524e><!--[--><p class="text" data-v-7730524e>Shell</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/guide/boot/Framework" data-v-7730524e><!--[--><p class="text" data-v-7730524e>Framework</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>配置</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/config/basic" data-v-7730524e><!--[--><p class="text" data-v-7730524e>基础配置</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/config/advanced" data-v-7730524e><!--[--><p class="text" data-v-7730524e>高级配置</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>使用</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/use/integration" data-v-7730524e><!--[--><p class="text" data-v-7730524e>接入框架</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/use/community" data-v-7730524e><!--[--><p class="text" data-v-7730524e>社区资源</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed has-active" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>开发</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/api" data-v-7730524e><!--[--><p class="text" data-v-7730524e>请求接口</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/event" data-v-7730524e><!--[--><p class="text" data-v-7730524e>上报事件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/msg" data-v-7730524e><!--[--><p class="text" data-v-7730524e>消息类型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/file" data-v-7730524e><!--[--><p class="text" data-v-7730524e>处理文件</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible has-active" data-v-7730524e data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h3 class="text" data-v-7730524e>插件开发</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/mechanism" data-v-7730524e><!--[--><p class="text" data-v-7730524e>插件机制原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/index" data-v-7730524e><!--[--><p class="text" data-v-7730524e>快速开始</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/structure" data-v-7730524e><!--[--><p class="text" data-v-7730524e>项目结构</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/start-webui" data-v-7730524e><!--[--><p class="text" data-v-7730524e>配置与 WebUI</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/advanced" data-v-7730524e><!--[--><p class="text" data-v-7730524e>进阶功能</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/hot-reload" data-v-7730524e><!--[--><p class="text" data-v-7730524e>热重载开发</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/publish" data-v-7730524e><!--[--><p class="text" data-v-7730524e>发布插件</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-2 collapsible" data-v-7730524e data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h4 class="text" data-v-7730524e>API 参考</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-3 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/api/doc" data-v-7730524e><!--[--><p class="text" data-v-7730524e>API 文档</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/api/type" data-v-7730524e><!--[--><p class="text" data-v-7730524e>类型定义</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-7730524e data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h3 class="text" data-v-7730524e>完整接口定义</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/api/doc" data-v-7730524e><!--[--><p class="text" data-v-7730524e>接口</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/api/type" data-v-7730524e><!--[--><p class="text" data-v-7730524e>类型</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>API 文档</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/api/" data-v-7730524e><!--[--><p class="text" data-v-7730524e>版本选择</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>协议</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/index" data-v-7730524e><!--[--><p class="text" data-v-7730524e>协议概述</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/network" data-v-7730524e><!--[--><p class="text" data-v-7730524e>网络通讯</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/basic_event" data-v-7730524e><!--[--><p class="text" data-v-7730524e>事件基础结构</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/event" data-v-7730524e><!--[--><p class="text" data-v-7730524e>事件字段详情</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/api" data-v-7730524e><!--[--><p class="text" data-v-7730524e>接口基础接口</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/sement" data-v-7730524e><!--[--><p class="text" data-v-7730524e>消息元素定义</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/napcat" data-v-7730524e><!--[--><p class="text" data-v-7730524e>差异实现说明</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>其余</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/other/napcat" data-v-7730524e><!--[--><p class="text" data-v-7730524e>喵喵</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/other/security" data-v-7730524e><!--[--><p class="text" data-v-7730524e>安全</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/other/about" data-v-7730524e><!--[--><p class="text" data-v-7730524e>联系</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-2c48374c data-v-c0a84ade><div class="VPDoc has-sidebar has-aside" data-v-c0a84ade data-v-4f95a2d9><!--[--><!--]--><div class="container" data-v-4f95a2d9><div class="aside" data-v-4f95a2d9><div class="aside-curtain" data-v-4f95a2d9></div><div class="aside-container" data-v-4f95a2d9><div class="aside-content" data-v-4f95a2d9><div class="VPDocAside" data-v-4f95a2d9 data-v-076103c5><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-076103c5 data-v-04df5ada><div class="content" data-v-04df5ada><div class="outline-marker" data-v-04df5ada></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-04df5ada>页面导航</div><ul class="VPDocOutlineItem root" data-v-04df5ada data-v-2f583807><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-076103c5></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-4f95a2d9><div class="content-container" data-v-4f95a2d9><!--[--><!--]--><main class="main" data-v-4f95a2d9><div style="position:relative;" class="vp-doc _develop_plugin_hot-reload" data-v-4f95a2d9><div><h1 id="热重载开发" tabindex="-1">热重载开发 <a class="header-anchor" href="#热重载开发" aria-label="Permalink to &quot;热重载开发&quot;">​</a></h1><div my-4 class="vp-nolebase-page-properties vp-nolebase-page-properties-container"><div class="vp-nolebase-page-properties-grid grid grid-cols-[180px_auto] gap-1 &lt;sm:grid-cols-[120px_auto]"><!--[--><!--[--><div transition="all ease-in-out" flex items-start text="zinc-400 dark:zinc-500 sm &lt;sm:xs" duration-250><div transition="all ease-in-out" min-h="8 &lt;sm:7" px="2 &lt;sm:1" py="2 &lt;sm:1" w-full flex cursor-pointer items-center bg="hover:zinc-100 dark:hover:zinc-800" rounded-md duration-250><div i-icon-park-outline:add-text mr-1></div><span overflow-hidden text-ellipsis whitespace-nowrap>字数</span></div></div><div cursor-pointer transition="all ease-in-out" min-h="8 &lt;sm:7" px="2 &lt;sm:1" py="1.5 &lt;sm:1" flex="~ row wrap" items-center gap-1 rounded-md text="sm &lt;sm:xs" bg="hover:zinc-100 dark:hover:zinc-800" duration-250><div class="vp-nolebase-page-property" data-page-property="value" data-page-property-type="dynamic" data-page-property-dynamic-type="word-count" w-full inline-flex items-center><span>2677 字</span></div></div><!--]--><!--[--><div transition="all ease-in-out" flex items-start text="zinc-400 dark:zinc-500 sm &lt;sm:xs" duration-250><div transition="all ease-in-out" min-h="8 &lt;sm:7" px="2 &lt;sm:1" py="2 &lt;sm:1" w-full flex cursor-pointer items-center bg="hover:zinc-100 dark:hover:zinc-800" rounded-md duration-250><div i-icon-park-outline:timer mr-1></div><span overflow-hidden text-ellipsis whitespace-nowrap>阅读时间</span></div></div><div cursor-pointer transition="all ease-in-out" min-h="8 &lt;sm:7" px="2 &lt;sm:1" py="1.5 &lt;sm:1" flex="~ row wrap" items-center gap-1 rounded-md text="sm &lt;sm:xs" bg="hover:zinc-100 dark:hover:zinc-800" duration-250><div class="vp-nolebase-page-property" data-page-property="value" data-page-property-type="dynamic" data-page-property-dynamic-type="reading-time" w-full inline-flex items-center><span>12 分钟</span></div></div><!--]--><!--]--></div></div><p>在传统的插件开发流程中，每次修改代码都需要手动构建、复制文件、重启 NapCat，效率较低。NapCat 提供了 <strong>热重载（HMR）</strong> 机制，允许你在开发过程中修改代码后自动重新加载插件，无需重启 NapCat。</p><div class="tip custom-block"><p class="custom-block-title">适用场景</p><p>热重载适用于 <strong>本地开发和调试阶段</strong>。当你完成开发并准备发布时，仍然使用 <a class="VPNolebaseInlinePreviewLink" relative href="./publish" data-v-2731f906><!--[-->发布插件<!--]--><!----></a> 中的标准流程。</p></div><div class="danger custom-block"><p class="custom-block-title">安全警告</p><p>调试服务基于 WebSocket 通信，<strong>默认不启用认证（无 token）</strong>，任何能访问该端口的客户端都可以执行插件管理操作（加载、卸载、重载插件等）。</p><ul><li><strong>强烈建议在本地环境调试</strong>（默认监听 <code>127.0.0.1</code>），避免远程调试</li><li><strong>未配置 token 时，切勿将调试端口暴露在公网中</strong>，否则任何人都可以连接并操控你的 NapCat 插件</li><li>如果确实需要远程调试，<strong>必须同时启用认证并设置高强度 token</strong>，且通过防火墙严格限制来源 IP</li></ul></div><h2 id="架构概览" tabindex="-1">架构概览 <a class="header-anchor" href="#架构概览" aria-label="Permalink to &quot;架构概览&quot;">​</a></h2><p>热重载机制由三个组件协同工作：</p><div class="mermaid my-class"></div><table tabindex="0"><thead><tr><th>组件</th><th>说明</th></tr></thead><tbody><tr><td><strong><a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/NapNeko/napcat-plugin-debug" target="_blank" rel="noreferrer" data-v-2731f906><!--[-->napcat-plugin-debug<!--]--><!----></a></strong></td><td>NapCat 端插件，启动 WebSocket 服务器（默认 <code>ws://127.0.0.1:8998</code>），将 PluginManager 的 API 暴露为 JSON-RPC 接口</td></tr><tr><td><strong>napcatHmrPlugin</strong> (Vite 插件)</td><td>集成到 Vite 构建流程中，在每次 <code>writeBundle</code> 时自动连接调试服务、复制 dist/ 到远程、调用 reloadPlugin。来自 <code>napcat-plugin-debug-cli/vite</code></td></tr><tr><td><strong><a class="VPNolebaseInlinePreviewLink" relative href="https://www.npmjs.com/package/napcat-plugin-debug-cli" target="_blank" rel="noreferrer" data-v-2731f906><!--[-->napcat-plugin-debug-cli<!--]--><!----></a></strong></td><td>可选的 CLI 工具，提供交互式 REPL、手动部署等功能</td></tr></tbody></table><h2 id="前置配置" tabindex="-1">前置配置 <a class="header-anchor" href="#前置配置" aria-label="Permalink to &quot;前置配置&quot;">​</a></h2><h3 id="_1-napcat-端-安装调试插件" tabindex="-1">1. NapCat 端：安装调试插件 <a class="header-anchor" href="#_1-napcat-端-安装调试插件" aria-label="Permalink to &quot;1. NapCat 端：安装调试插件&quot;">​</a></h3><p>在 NapCat 的插件市场中搜索并安装 <code>napcat-plugin-debug</code>（插件调试服务），启用后它会自动在 <code>ws://127.0.0.1:8998</code> 启动 WebSocket 调试服务。</p><details class="details custom-block"><summary>调试服务配置项</summary><p>在 NapCat WebUI 的插件配置中可以修改以下参数：</p><table tabindex="0"><thead><tr><th>配置项</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>调试服务端口</td><td><code>8998</code></td><td>WebSocket 监听端口</td></tr><tr><td>监听地址</td><td><code>127.0.0.1</code></td><td><strong>请勿改为 <code>0.0.0.0</code>，除非你清楚安全风险</strong></td></tr><tr><td>启用认证</td><td><code>false</code></td><td>启用后客户端需提供 token</td></tr><tr><td>认证 Token</td><td>空</td><td>客户端连接时的认证 token</td></tr></tbody></table><blockquote><p>默认配置仅监听本地回环地址 <code>127.0.0.1</code>，只有本机可以连接，这是最安全的方式。如果将监听地址改为 <code>0.0.0.0</code> 且未启用认证，等同于将插件管理权限完全暴露在网络中。</p></blockquote></details><h3 id="_2-插件项目-安装依赖" tabindex="-1">2. 插件项目：安装依赖 <a class="header-anchor" href="#_2-插件项目-安装依赖" aria-label="Permalink to &quot;2. 插件项目：安装依赖&quot;">​</a></h3><p>在你的插件项目中，安装 <code>napcat-plugin-debug-cli</code> 和 <code>ws</code> 作为开发依赖：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> napcat-plugin-debug-cli</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ws</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>如果你使用 <a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/NapNeko/napcat-plugin-template" target="_blank" rel="noreferrer" data-v-2731f906><!--[-->napcat-plugin-template<!--]--><!----></a> 模板，这些依赖和配置已经预置好，无需额外操作。</p></div><h3 id="_3-配置-vite-插件" tabindex="-1">3. 配置 Vite 插件 <a class="header-anchor" href="#_3-配置-vite-插件" aria-label="Permalink to &quot;3. 配置 Vite 插件&quot;">​</a></h3><p>在 <code>vite.config.ts</code> 中引入并添加 <code>napcatHmrPlugin</code>（模板中已预置）：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { napcatHmrPlugin } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;napcat-plugin-debug-cli/vite&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...其他配置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    nodeResolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    copyAssetsPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    napcatHmrPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 构建完成后自动部署+重载</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>可选配置项：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">napcatHmrPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  wsUrl: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ws://192.168.1.100:8998&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 调试服务地址（默认 ws://127.0.0.1:8998）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  token: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mySecret&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,                  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 认证 token</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  enabled: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,                       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 是否启用（默认 true）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">关于远程连接</p><p>上述 <code>wsUrl</code> 指向远程地址仅作为示例。实际开发中 <strong>建议在本地调试</strong>（使用默认的 <code>ws://127.0.0.1:8998</code>）。如果你的 NapCat 运行在远程服务器上，请确保调试服务已启用 token 认证，并通过 SSH 隧道或防火墙限制访问，而非直接将端口暴露在公网。</p></div><h3 id="_4-配置-npm-scripts" tabindex="-1">4. 配置 npm scripts <a class="header-anchor" href="#_4-配置-npm-scripts" aria-label="Permalink to &quot;4. 配置 npm scripts&quot;">​</a></h3><p>在 <code>package.json</code> 中添加以下脚本（模板中已预置）：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vite build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;push&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vite build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;dev&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vite build --watch&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><table tabindex="0"><thead><tr><th>脚本</th><th>说明</th></tr></thead><tbody><tr><td><code>build</code></td><td>仅构建（如调试服务在线则自动部署）</td></tr><tr><td><code>push</code></td><td>构建 + 自动部署到远程 + 重载插件</td></tr><tr><td><code>dev</code></td><td>持续构建 + 每次构建后自动部署 + 热重载</td></tr></tbody></table><div class="warning custom-block"><p class="custom-block-title">不要使用 <code>deploy</code> 作为脚本名</p><p>pnpm 有内置的 <code>pnpm deploy</code> 命令（用于 workspace 部署），会覆盖 <code>package.json</code> 中的同名脚本，导致 <code>ERR_PNPM_CANNOT_DEPLOY</code> 错误。请使用 <code>push</code> 或其他名称代替。</p></div><blockquote><p>因为 <code>napcatHmrPlugin</code> 已集成到 Vite 构建流程中，所以 <code>push</code> 和 <code>dev</code> 只需要 <code>vite build</code> / <code>vite build --watch</code> 即可，无需额外启动 CLI 进程。</p></blockquote><h2 id="开发流程" tabindex="-1">开发流程 <a class="header-anchor" href="#开发流程" aria-label="Permalink to &quot;开发流程&quot;">​</a></h2><h3 id="一、首次部署" tabindex="-1">一、首次部署 <a class="header-anchor" href="#一、首次部署" aria-label="Permalink to &quot;一、首次部署&quot;">​</a></h3><p>首次开发时，使用 <code>push</code> 命令将插件构建并部署到 NapCat：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span></span></code></pre></div><p>执行 <code>vite build</code> 时，Vite 插件 <code>napcatHmrPlugin</code> 会在构建完成的 <code>writeBundle</code> 钩子中自动执行部署流程：</p><div class="mermaid my-class"></div><h4 id="插件如何知道-napcat-的插件目录" tabindex="-1">插件如何知道 NapCat 的插件目录？ <a class="header-anchor" href="#插件如何知道-napcat-的插件目录" aria-label="Permalink to &quot;插件如何知道 NapCat 的插件目录？&quot;">​</a></h4><p>Vite 插件 <strong>不需要</strong>你手动配置 NapCat 的安装路径。它的工作流程是：</p><ol><li>构建完成后，<code>napcatHmrPlugin</code> 连接 NapCat 端的 <code>napcat-plugin-debug</code> WebSocket 服务（默认 <code>ws://127.0.0.1:8998</code>）</li><li>通过 JSON-RPC 调用 <code>getDebugInfo()</code> 方法，NapCat 返回当前实际的插件目录绝对路径</li><li>读取 <code>dist/package.json</code> 的 <code>name</code> 字段，确定插件名称</li><li>将 <code>dist/</code> 的内容复制到 <code>&lt;远程插件目录&gt;/&lt;插件名&gt;/</code> 下</li><li>调用 <code>reloadPlugin</code> 或 <code>loadDirectoryPlugin</code> 触发热重载</li></ol><p>这意味着无论 NapCat 安装在哪里，Vite 插件都能自动适配。整个流程在一个进程中完成，无需启动额外的 CLI。</p><h3 id="二、持续开发-热重载" tabindex="-1">二、持续开发（热重载） <a class="header-anchor" href="#二、持续开发-热重载" aria-label="Permalink to &quot;二、持续开发（热重载）&quot;">​</a></h3><p>完成首次部署后，使用 <code>dev</code> 命令进入热重载开发模式：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre></div><p>等价于带 <code>--watch</code> 的 <code>vite build</code>，只需要 <strong>一个进程</strong>：</p><ol><li><strong>Vite watch 模式</strong>：监听 <code>src/</code> 下的源码变更，自动重新构建到 <code>dist/</code></li><li><strong>napcatHmrPlugin</strong>：每次 <code>writeBundle</code>（构建完成）时自动部署到远程并调用热重载</li></ol><div class="mermaid my-class"></div><p><strong>改一行代码，保存即生效，无需重启 NapCat。</strong></p><p>NapCat 端在收到重载指令后会：</p><ol><li>调用旧插件实例的 <code>plugin_cleanup()</code> 释放资源</li><li>清除 Node.js 模块缓存</li><li>重新 <code>import()</code> 加载新代码</li><li>调用 <code>plugin_init(ctx)</code> 初始化新实例</li></ol><div class="warning custom-block"><p class="custom-block-title">注意 plugin_cleanup</p><p>热重载依赖 <code>plugin_cleanup</code> 正确释放资源（如定时器、WebSocket 连接、事件监听器等）。如果不清理，可能导致重复注册或内存泄漏。请务必在 <code>plugin_cleanup</code> 中做好清理工作。</p></div><h3 id="三、交互调试-repl" tabindex="-1">三、交互调试（REPL） <a class="header-anchor" href="#三、交互调试-repl" aria-label="Permalink to &quot;三、交互调试（REPL）&quot;">​</a></h3><p>直接运行 CLI 而不带 <code>--watch</code> 或 <code>--deploy</code> 参数，会进入交互式 REPL 模式：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> napcat-debug</span></span></code></pre></div><p>在 REPL 中可以使用以下命令：</p><table tabindex="0"><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td><code>list</code></td><td>列出所有插件及其加载状态</td></tr><tr><td><code>reload &lt;id&gt;</code></td><td>手动重载指定插件</td></tr><tr><td><code>load &lt;id&gt;</code></td><td>加载指定插件</td></tr><tr><td><code>unload &lt;id&gt;</code></td><td>卸载指定插件</td></tr><tr><td><code>info &lt;id&gt;</code></td><td>查看插件详细信息（路径、版本、状态等）</td></tr><tr><td><code>deploy [dir]</code></td><td>部署插件到远程并重载</td></tr><tr><td><code>watch &lt;dir&gt;</code></td><td>启动文件监听</td></tr><tr><td><code>unwatch</code></td><td>停止文件监听</td></tr><tr><td><code>status</code></td><td>查看调试服务状态和 HMR 状态</td></tr><tr><td><code>ping</code></td><td>心跳测试（含延迟）</td></tr><tr><td><code>quit</code></td><td>退出</td></tr></tbody></table><h2 id="cli-完整用法" tabindex="-1">CLI 完整用法 <a class="header-anchor" href="#cli-完整用法" aria-label="Permalink to &quot;CLI 完整用法&quot;">​</a></h2><blockquote><p>CLI 是独立的调试工具，提供 REPL 交互、手动部署等功能。日常开发推荐使用上述 Vite 插件方式（<code>pnpm run dev</code>），无需手动运行 CLI。</p></blockquote><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">napcat-debug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ws-url] [options]</span></span></code></pre></div><table tabindex="0"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td><code>ws://host:port</code></td><td>调试服务地址（默认 <code>ws://127.0.0.1:8998</code>）</td></tr><tr><td><code>-t, --token &lt;token&gt;</code></td><td>认证 token（当调试服务启用认证时使用）</td></tr><tr><td><code>-w, --watch &lt;dir&gt;</code></td><td>监听指定目录，文件变更时自动热重载</td></tr><tr><td><code>-W, --watch-all</code></td><td>监听远程插件目录下的所有插件</td></tr><tr><td><code>-d, --deploy [dir]</code></td><td>部署插件到远程并重载（默认当前目录）</td></tr><tr><td><code>-v, --verbose</code></td><td>详细输出（显示事件通知等）</td></tr></tbody></table><h3 id="常用组合" tabindex="-1">常用组合 <a class="header-anchor" href="#常用组合" aria-label="Permalink to &quot;常用组合&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 默认连接本地调试服务，进入 REPL</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">napcat-debug</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 连接远程 NapCat</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">napcat-debug</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ws://192.168.1.100:8998</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 带认证连接</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">napcat-debug</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mySecret</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 构建后一键部署</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">napcat-debug</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --deploy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 监听 dist/ 目录自动热重载</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">napcat-debug</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --watch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./dist</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 监听远程所有插件（用于直接编辑远程文件的场景）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">napcat-debug</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --watch-all</span></span></code></pre></div><h2 id="完整数据流" tabindex="-1">完整数据流 <a class="header-anchor" href="#完整数据流" aria-label="Permalink to &quot;完整数据流&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>源码修改 (src/)</span></span>
<span class="line"><span>    │</span></span>
<span class="line"><span>    ▼</span></span>
<span class="line"><span>Vite --watch 重新构建 → dist/</span></span>
<span class="line"><span>    │</span></span>
<span class="line"><span>    ▼</span></span>
<span class="line"><span>napcatHmrPlugin writeBundle 钩子</span></span>
<span class="line"><span>  → 复制 dist/ → 远程插件目录/&lt;pluginName&gt;/</span></span>
<span class="line"><span>    │</span></span>
<span class="line"><span>    ▼</span></span>
<span class="line"><span>WebSocket → JSON-RPC reloadPlugin(pluginId)</span></span>
<span class="line"><span>    │</span></span>
<span class="line"><span>    ▼</span></span>
<span class="line"><span>NapCat 端:</span></span>
<span class="line"><span>  1. plugin_cleanup(ctx)     — 卸载旧实例、释放资源</span></span>
<span class="line"><span>  2. 清除 Node.js 模块缓存    — 确保 import() 拿到新代码</span></span>
<span class="line"><span>  3. import(pluginEntry)      — 重新加载插件模块</span></span>
<span class="line"><span>  4. plugin_init(ctx)         — 初始化新实例、注册路由等</span></span></code></pre></div><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h2><h3 id="热重载后插件行为异常" tabindex="-1">热重载后插件行为异常？ <a class="header-anchor" href="#热重载后插件行为异常" aria-label="Permalink to &quot;热重载后插件行为异常？&quot;">​</a></h3><p>检查 <code>plugin_cleanup</code> 是否正确清理了所有资源：</p><ul><li>定时器（<code>clearInterval</code> / <code>clearTimeout</code>）</li><li>WebSocket 连接</li><li>文件监听器</li><li>事件监听器</li></ul><h3 id="连接调试服务失败" tabindex="-1">连接调试服务失败？ <a class="header-anchor" href="#连接调试服务失败" aria-label="Permalink to &quot;连接调试服务失败？&quot;">​</a></h3><ol><li>确认 <code>napcat-plugin-debug</code> 已在 NapCat 中启用</li><li>检查端口是否正确（默认 <code>8998</code>）</li><li>如果启用了认证，确认 token 正确（Vite 插件通过 <code>napcatHmrPlugin({ token: &#39;...&#39; })</code> 配置）</li><li>如果 NapCat 运行在远程机器上，建议通过 SSH 隧道转发端口（如 <code>ssh -L 8998:127.0.0.1:8998 user@server</code>），而非直接开放端口</li></ol><h3 id="安全最佳实践" tabindex="-1">安全最佳实践 <a class="header-anchor" href="#安全最佳实践" aria-label="Permalink to &quot;安全最佳实践&quot;">​</a></h3><table tabindex="0"><thead><tr><th>场景</th><th>建议做法</th></tr></thead><tbody><tr><td>本地开发（NapCat 和编辑器在同一台机器）</td><td>使用默认配置即可，无需额外设置</td></tr><tr><td>远程开发（NapCat 在远程服务器）</td><td>使用 SSH 隧道转发端口，保持调试服务监听 <code>127.0.0.1</code></td></tr><tr><td>必须直接远程连接</td><td>启用认证 + 设置高强度 token + 防火墙限制来源 IP</td></tr><tr><td>生产环境</td><td><strong>不要启用调试插件</strong>，仅在开发阶段使用</td></tr></tbody></table><h3 id="部署时提示-dist-不存在" tabindex="-1">部署时提示 <code>dist/</code> 不存在？ <a class="header-anchor" href="#部署时提示-dist-不存在" aria-label="Permalink to &quot;部署时提示 `dist/` 不存在？&quot;">​</a></h3><p>先运行 <code>pnpm run build</code> 构建项目，确保 <code>dist/</code> 目录已生成。</p><!--[--><!----><div class="bg-$vp-custom-block-details-bg mt-6 vp-nolebase-git-changelog vp-nolebase-git-changelog-history vp-nolebase-git-changelog-history-list vp-nolebase-git-changelog-history-container" rounded-lg p-4 data-v-52549c39><label cursor-pointer data-v-52549c39><div class="vp-nolebase-git-changelog-title flex select-none items-center justify-between" transition="color ease-in-out" text="&lt;sm:xs" duration-200 data-v-52549c39><span class="vp-nolebase-git-changelog-last-edited-title inline-flex items-center gap-3" data-v-52549c39><div class="i-octicon:history-16" data-v-52549c39></div><span data-v-52549c39>最后编辑于 12 天前</span></span><div class="i-octicon:sort-desc-16" ml-auto mr-4 cursor-pointer data-v-52549c39></div><span class="vp-nolebase-git-changelog-view-full-history-title inline-flex cursor-pointer items-center gap-3" data-v-52549c39><span class="&lt;sm:hidden" data-v-52549c39>查看完整历史</span><svg class="rotate-0 i-octicon:chevron-down-16" transition="transform ease-in-out" duration-200 data-v-52549c39></svg></span></div></label><div class="grid grid-cols-[30px_auto] mt-3 gap-1.5 children:my-auto -ml-1.5" text="&lt;sm:xs" style="display:none;" data-v-52549c39><!--[--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-4efc63fc></div><div flex gap-1 align-baseline data-v-4efc63fc><a href="https://github.com/NapNeko/NapCatDocs/commit/6bd94c111fbe341496b8bbd5901e4b5e5f97b9d9" target="_blank" class="no-icon" data-v-4efc63fc><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-4efc63fc>6bd94c1</code></a><span data-v-4efc63fc>-</span><span data-v-4efc63fc><span class="text-sm &lt;sm:text-xs" data-v-4efc63fc>docs: 增加热重载安全警告和最佳实践建议</span><span class="my-1 ml-3 gap-1" data-v-4efc63fc><!--[--><!--[--><img src="https://gravatar.com/avatar/ce7916dc3a2092038d49830141ca3d3d71af983b1cd81fbdd5cbe3dde047431f?d=retro" alt="The avatar of contributor named as Qiao" class="vp-nolebase-git-changelog-commit-avatar inline-block h-6 w-6 rounded-full v-middle" data-v-4efc63fc><!--]--><!--]--></span><!----></span></div><!--]--><!--]--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-4efc63fc></div><div flex gap-1 align-baseline data-v-4efc63fc><a href="https://github.com/NapNeko/NapCatDocs/commit/9f74eaeef77314b3ef2c6ce8a6b6ae908f2d9663" target="_blank" class="no-icon" data-v-4efc63fc><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-4efc63fc>9f74eae</code></a><span data-v-4efc63fc>-</span><span data-v-4efc63fc><span class="text-sm &lt;sm:text-xs" data-v-4efc63fc>docs: rename deploy to push, add pnpm deploy warning</span><span class="my-1 ml-3 gap-1" data-v-4efc63fc><!--[--><!--[--><img src="https://gravatar.com/avatar/ce7916dc3a2092038d49830141ca3d3d71af983b1cd81fbdd5cbe3dde047431f?d=retro" alt="The avatar of contributor named as Qiao" class="vp-nolebase-git-changelog-commit-avatar inline-block h-6 w-6 rounded-full v-middle" data-v-4efc63fc><!--]--><!--]--></span><!----></span></div><!--]--><!--]--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-4efc63fc></div><div flex gap-1 align-baseline data-v-4efc63fc><a href="https://github.com/NapNeko/NapCatDocs/commit/f2d9faf5cc913d04400c056f471a95dbf485c89d" target="_blank" class="no-icon" data-v-4efc63fc><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-4efc63fc>f2d9faf</code></a><span data-v-4efc63fc>-</span><span data-v-4efc63fc><span class="text-sm &lt;sm:text-xs" data-v-4efc63fc>feat: 新增热重载开发文档，提升插件开发效率</span><span class="my-1 ml-3 gap-1" data-v-4efc63fc><!--[--><!--[--><img src="https://gravatar.com/avatar/ce7916dc3a2092038d49830141ca3d3d71af983b1cd81fbdd5cbe3dde047431f?d=retro" alt="The avatar of contributor named as Qiao" class="vp-nolebase-git-changelog-commit-avatar inline-block h-6 w-6 rounded-full v-middle" data-v-4efc63fc><!--]--><!--]--></span><!----></span></div><!--]--><!--]--><!--]--></div></div><!--]--></div></div></main><footer class="VPDocFooter" data-v-4f95a2d9 data-v-ebefe59e><!--[--><!--]--><div class="edit-info" data-v-ebefe59e><div class="edit-link" data-v-ebefe59e><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/NapNeko/NapCatDocs/edit/main/src/develop/plugin/hot-reload.md" target="_blank" rel="noreferrer" data-v-ebefe59e><!--[--><span class="vpi-square-pen edit-link-icon" data-v-ebefe59e></span> 在 GitHub 上编辑此页面<!--]--></a></div><div class="last-updated" data-v-ebefe59e><p class="VPLastUpdated" data-v-ebefe59e data-v-0123dd20>最后更新于: <time datetime="2026-02-08T13:12:38.000Z" data-v-0123dd20></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-ebefe59e><span class="visually-hidden" id="doc-footer-aria-label" data-v-ebefe59e>Pager</span><div class="pager" data-v-ebefe59e><a class="VPLink link pager-link prev" href="/develop/plugin/advanced" data-v-ebefe59e><!--[--><span class="desc" data-v-ebefe59e>上一页</span><span class="title" data-v-ebefe59e>进阶功能</span><!--]--></a></div><div class="pager" data-v-ebefe59e><a class="VPLink link pager-link next" href="/develop/plugin/publish" data-v-ebefe59e><!--[--><span class="desc" data-v-ebefe59e>下一页</span><span class="title" data-v-ebefe59e>发布插件</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!----><!--]--></div></div>
    
    
  </body>
</html>