<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>发布插件 | NapCatQQ</title>
    <meta name="description" content="基于NTQQ现代化协议端Bot框架">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.qppx-uBn.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.3258ff0b.js"></script>
    <script type="module" src="/assets/app.TtVwM-PO.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.BeKdlGsR.js">
    <link rel="modulepreload" href="/assets/chunks/theme.BOztYT_O.js">
    <link rel="modulepreload" href="/assets/chunks/katex.CBSAILhF.js">
    <link rel="modulepreload" href="/assets/chunks/dagre-6UL2VRFP.BrPwiOQF.js">
    <link rel="modulepreload" href="/assets/chunks/cose-bilkent-S5V4N54A.DDjF710A.js">
    <link rel="modulepreload" href="/assets/chunks/c4Diagram-YG6GDRKO.qlLATngd.js">
    <link rel="modulepreload" href="/assets/chunks/flowDiagram-NV44I4VS.C5P91pIT.js">
    <link rel="modulepreload" href="/assets/chunks/erDiagram-Q2GNP2WA.YLtqFWuQ.js">
    <link rel="modulepreload" href="/assets/chunks/gitGraphDiagram-NY62KEGX.DzJeT3Zu.js">
    <link rel="modulepreload" href="/assets/chunks/ganttDiagram-JELNMOA3.y_Ugyf-Q.js">
    <link rel="modulepreload" href="/assets/chunks/infoDiagram-WHAUD3N6.BnjT1HfY.js">
    <link rel="modulepreload" href="/assets/chunks/pieDiagram-ADFJNKIX.0WiqBt7t.js">
    <link rel="modulepreload" href="/assets/chunks/quadrantDiagram-AYHSOK5B.Dxi0j1oG.js">
    <link rel="modulepreload" href="/assets/chunks/xychartDiagram-PRI3JC2R.Ba_qKqIh.js">
    <link rel="modulepreload" href="/assets/chunks/requirementDiagram-UZGBJVZJ.DdGS9phO.js">
    <link rel="modulepreload" href="/assets/chunks/sequenceDiagram-WL72ISMW.CLpG_1i5.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-2ON5EDUG.BkRyUOtc.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-v2-WZHVMYZB.BkRyUOtc.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-FKZM4ZOC.BnjjLyPs.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-v2-4FDKWEC3.DVSuYI3A.js">
    <link rel="modulepreload" href="/assets/chunks/journeyDiagram-XKPGCS4Q.jMnx2nbD.js">
    <link rel="modulepreload" href="/assets/chunks/timeline-definition-IT6M3QCI.CXoLemOB.js">
    <link rel="modulepreload" href="/assets/chunks/mindmap-definition-VGOIOE7T.BBl4E1kX.js">
    <link rel="modulepreload" href="/assets/chunks/kanban-definition-3W4ZIXB7.BjNpF_2a.js">
    <link rel="modulepreload" href="/assets/chunks/sankeyDiagram-TZEHDZUN.CZav0pm2.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-S2PKOQOG.o0To7fHo.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-QEK2KX5R.DztmtPy1.js">
    <link rel="modulepreload" href="/assets/chunks/blockDiagram-VD42YOAC.LKO-cI_Q.js">
    <link rel="modulepreload" href="/assets/chunks/architectureDiagram-VXUJARFQ.CgME6yH0.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-PSM6KHXK.DKaPp20i.js">
    <link rel="modulepreload" href="/assets/chunks/virtual_mermaid-config.DDnGl6nM.js">
    <link rel="modulepreload" href="/assets/develop_plugin_publish.md.CfKzNjku.lean.js">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/newnewlogo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/newnewlogo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/newnewlogo.png">
    <link rel="mask-icon" href="/assets/newnewlogo.png" color="#5bbad5">
    <meta name="theme-color" content="#5f67ee">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-2c48374c><!--[--><!--[--><!--]--><!--]--><!--[--><span tabindex="-1" data-v-87b843e7></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-87b843e7>Skip to content</a><!--]--><!----><header class="VPNav" data-v-2c48374c data-v-fb19007f><div class="VPNavBar" data-v-fb19007f data-v-e95c15d4><div class="wrapper" data-v-e95c15d4><div class="container" data-v-e95c15d4><div class="title" data-v-e95c15d4><div class="VPNavBarTitle has-sidebar" data-v-e95c15d4 data-v-f6097aee><a class="title" href="/" data-v-f6097aee><!--[--><!--]--><!--[--><img class="VPImage logo" src="/assets/newnewlogo.png" width="24" height="24" alt data-v-0256067c><!--]--><span data-v-f6097aee>NapCatQQ</span><!--[--><!--]--></a></div></div><div class="content" data-v-e95c15d4><div class="content-body" data-v-e95c15d4><!--[--><!--]--><div class="VPNavBarSearch search" data-v-e95c15d4><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-e95c15d4 data-v-8b783473><span id="main-nav-aria-label" class="visually-hidden" data-v-8b783473> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/start-install" tabindex="0" data-v-8b783473 data-v-cdf75f5e><!--[--><span data-v-cdf75f5e>快速开始</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/other/about" tabindex="0" data-v-8b783473 data-v-cdf75f5e><!--[--><span data-v-cdf75f5e>关于</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-e95c15d4 data-v-de8fb74c><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-de8fb74c data-v-b80ae14c data-v-c75bc1aa><span class="check" data-v-c75bc1aa><span class="icon" data-v-c75bc1aa><!--[--><span class="vpi-sun sun" data-v-b80ae14c></span><span class="vpi-moon moon" data-v-b80ae14c></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-e95c15d4 data-v-7e3fd8bb data-v-5b80a4d9><!--[--><a class="VPSocialLink no-icon" href="https://github.com/NapNeko/NapCatQQ" aria-label="github" target="_blank" rel="noopener" data-v-5b80a4d9 data-v-8eb186bc><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-e95c15d4 data-v-e4851a68 data-v-e2c613d4><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-e2c613d4><span class="vpi-more-horizontal icon" data-v-e2c613d4></span></button><div class="menu" data-v-e2c613d4><div class="VPMenu" data-v-e2c613d4 data-v-44a1212e><!----><!--[--><!--[--><!----><div class="group" data-v-e4851a68><div class="item appearance" data-v-e4851a68><p class="label" data-v-e4851a68>主题</p><div class="appearance-action" data-v-e4851a68><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-e4851a68 data-v-b80ae14c data-v-c75bc1aa><span class="check" data-v-c75bc1aa><span class="icon" data-v-c75bc1aa><!--[--><span class="vpi-sun sun" data-v-b80ae14c></span><span class="vpi-moon moon" data-v-b80ae14c></span><!--]--></span></span></button></div></div></div><div class="group" data-v-e4851a68><div class="item social-links" data-v-e4851a68><div class="VPSocialLinks social-links-list" data-v-e4851a68 data-v-5b80a4d9><!--[--><a class="VPSocialLink no-icon" href="https://github.com/NapNeko/NapCatQQ" aria-label="github" target="_blank" rel="noopener" data-v-5b80a4d9 data-v-8eb186bc><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--[--><!--[--><div class="VPFlyout VPNolebaseEnhancedReadabilitiesMenu VPNolebaseEnhancedReadabilitiesMenuFlyout" aria-label="阅读增强" role="menuitem" data-v-e2c613d4><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e2c613d4><span class="text" data-v-e2c613d4><span class="i-icon-park-outline:book-open option-icon" data-v-e2c613d4></span><!----><span class="vpi-chevron-down text-icon" data-v-e2c613d4></span></span></button><div class="menu" data-v-e2c613d4><div class="VPMenu" data-v-e2c613d4 data-v-44a1212e><!----><!--[--><!--]--></div></div></div><!--]--><!--]--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-e95c15d4 data-v-91187410><span class="container" data-v-91187410><span class="top" data-v-91187410></span><span class="middle" data-v-91187410></span><span class="bottom" data-v-91187410></span></span></button></div></div></div></div><div class="divider" data-v-e95c15d4><div class="divider-line" data-v-e95c15d4></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-2c48374c data-v-76a1de1c><div class="container" data-v-76a1de1c><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-76a1de1c><span class="vpi-align-left menu-icon" data-v-76a1de1c></span><span class="menu-text" data-v-76a1de1c>菜单</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-76a1de1c data-v-534c9c12><button data-v-534c9c12>回到顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-2c48374c data-v-a50e714f><div class="curtain" data-v-a50e714f></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-a50e714f><span class="visually-hidden" id="sidebar-aria-label" data-v-a50e714f> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>快速开始</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/guide/start-install" data-v-7730524e><!--[--><p class="text" data-v-7730524e>目录导航</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/guide/napcat" data-v-7730524e><!--[--><p class="text" data-v-7730524e>什么是 NapCatQQ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/guide/install" data-v-7730524e><!--[--><p class="text" data-v-7730524e>启动方式</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible" data-v-7730524e data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h3 class="text" data-v-7730524e>安装方式</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/guide/boot/Shell" data-v-7730524e><!--[--><p class="text" data-v-7730524e>Shell</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/guide/boot/Framework" data-v-7730524e><!--[--><p class="text" data-v-7730524e>Framework</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>配置</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/config/basic" data-v-7730524e><!--[--><p class="text" data-v-7730524e>基础配置</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/config/advanced" data-v-7730524e><!--[--><p class="text" data-v-7730524e>高级配置</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>使用</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/use/integration" data-v-7730524e><!--[--><p class="text" data-v-7730524e>接入框架</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/use/community" data-v-7730524e><!--[--><p class="text" data-v-7730524e>社区资源</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed has-active" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>开发</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/api" data-v-7730524e><!--[--><p class="text" data-v-7730524e>请求接口</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/event" data-v-7730524e><!--[--><p class="text" data-v-7730524e>上报事件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/msg" data-v-7730524e><!--[--><p class="text" data-v-7730524e>消息类型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/file" data-v-7730524e><!--[--><p class="text" data-v-7730524e>处理文件</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible has-active" data-v-7730524e data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h3 class="text" data-v-7730524e>插件开发</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/mechanism" data-v-7730524e><!--[--><p class="text" data-v-7730524e>插件机制原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/index" data-v-7730524e><!--[--><p class="text" data-v-7730524e>快速开始</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/structure" data-v-7730524e><!--[--><p class="text" data-v-7730524e>项目结构</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/start-webui" data-v-7730524e><!--[--><p class="text" data-v-7730524e>配置与 WebUI</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/advanced" data-v-7730524e><!--[--><p class="text" data-v-7730524e>进阶功能</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/hot-reload" data-v-7730524e><!--[--><p class="text" data-v-7730524e>热重载开发</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/publish" data-v-7730524e><!--[--><p class="text" data-v-7730524e>发布插件</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-2 collapsible" data-v-7730524e data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h4 class="text" data-v-7730524e>API 参考</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-3 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/api/doc" data-v-7730524e><!--[--><p class="text" data-v-7730524e>API 文档</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/plugin/api/type" data-v-7730524e><!--[--><p class="text" data-v-7730524e>类型定义</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section><section class="VPSidebarItem level-1 collapsible" data-v-7730524e data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h3 class="text" data-v-7730524e>完整接口定义</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/api/doc" data-v-7730524e><!--[--><p class="text" data-v-7730524e>接口</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/develop/api/type" data-v-7730524e><!--[--><p class="text" data-v-7730524e>类型</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>API 文档</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/api/" data-v-7730524e><!--[--><p class="text" data-v-7730524e>版本选择</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>协议</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/index" data-v-7730524e><!--[--><p class="text" data-v-7730524e>协议概述</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/network" data-v-7730524e><!--[--><p class="text" data-v-7730524e>网络通讯</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/basic_event" data-v-7730524e><!--[--><p class="text" data-v-7730524e>事件基础结构</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/event" data-v-7730524e><!--[--><p class="text" data-v-7730524e>事件字段详情</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/api" data-v-7730524e><!--[--><p class="text" data-v-7730524e>接口基础接口</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/sement" data-v-7730524e><!--[--><p class="text" data-v-7730524e>消息元素定义</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/onebot/napcat" data-v-7730524e><!--[--><p class="text" data-v-7730524e>差异实现说明</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-0a1a1882><section class="VPSidebarItem level-0 collapsible collapsed" data-v-0a1a1882 data-v-7730524e><div class="item" role="button" tabindex="0" data-v-7730524e><div class="indicator" data-v-7730524e></div><h2 class="text" data-v-7730524e>其余</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7730524e><span class="vpi-chevron-right caret-icon" data-v-7730524e></span></div></div><div class="items" data-v-7730524e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/other/napcat" data-v-7730524e><!--[--><p class="text" data-v-7730524e>喵喵</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/other/security" data-v-7730524e><!--[--><p class="text" data-v-7730524e>安全</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7730524e data-v-7730524e><div class="item" data-v-7730524e><div class="indicator" data-v-7730524e></div><a class="VPLink link link" href="/other/about" data-v-7730524e><!--[--><p class="text" data-v-7730524e>联系</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-2c48374c data-v-c0a84ade><div class="VPDoc has-sidebar has-aside" data-v-c0a84ade data-v-4f95a2d9><!--[--><!--]--><div class="container" data-v-4f95a2d9><div class="aside" data-v-4f95a2d9><div class="aside-curtain" data-v-4f95a2d9></div><div class="aside-container" data-v-4f95a2d9><div class="aside-content" data-v-4f95a2d9><div class="VPDocAside" data-v-4f95a2d9 data-v-076103c5><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-076103c5 data-v-04df5ada><div class="content" data-v-04df5ada><div class="outline-marker" data-v-04df5ada></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-04df5ada>页面导航</div><ul class="VPDocOutlineItem root" data-v-04df5ada data-v-2f583807><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-076103c5></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-4f95a2d9><div class="content-container" data-v-4f95a2d9><!--[--><!--]--><main class="main" data-v-4f95a2d9><div style="position:relative;" class="vp-doc _develop_plugin_publish" data-v-4f95a2d9><div><h1 id="发布插件" tabindex="-1">发布插件 <a class="header-anchor" href="#发布插件" aria-label="Permalink to &quot;发布插件&quot;">​</a></h1><div my-4 class="vp-nolebase-page-properties vp-nolebase-page-properties-container"><div class="vp-nolebase-page-properties-grid grid grid-cols-[180px_auto] gap-1 &lt;sm:grid-cols-[120px_auto]"><!--[--><!--[--><div transition="all ease-in-out" flex items-start text="zinc-400 dark:zinc-500 sm &lt;sm:xs" duration-250><div transition="all ease-in-out" min-h="8 &lt;sm:7" px="2 &lt;sm:1" py="2 &lt;sm:1" w-full flex cursor-pointer items-center bg="hover:zinc-100 dark:hover:zinc-800" rounded-md duration-250><div i-icon-park-outline:add-text mr-1></div><span overflow-hidden text-ellipsis whitespace-nowrap>字数</span></div></div><div cursor-pointer transition="all ease-in-out" min-h="8 &lt;sm:7" px="2 &lt;sm:1" py="1.5 &lt;sm:1" flex="~ row wrap" items-center gap-1 rounded-md text="sm &lt;sm:xs" bg="hover:zinc-100 dark:hover:zinc-800" duration-250><div class="vp-nolebase-page-property" data-page-property="value" data-page-property-type="dynamic" data-page-property-dynamic-type="word-count" w-full inline-flex items-center><span>3186 字</span></div></div><!--]--><!--[--><div transition="all ease-in-out" flex items-start text="zinc-400 dark:zinc-500 sm &lt;sm:xs" duration-250><div transition="all ease-in-out" min-h="8 &lt;sm:7" px="2 &lt;sm:1" py="2 &lt;sm:1" w-full flex cursor-pointer items-center bg="hover:zinc-100 dark:hover:zinc-800" rounded-md duration-250><div i-icon-park-outline:timer mr-1></div><span overflow-hidden text-ellipsis whitespace-nowrap>阅读时间</span></div></div><div cursor-pointer transition="all ease-in-out" min-h="8 &lt;sm:7" px="2 &lt;sm:1" py="1.5 &lt;sm:1" flex="~ row wrap" items-center gap-1 rounded-md text="sm &lt;sm:xs" bg="hover:zinc-100 dark:hover:zinc-800" duration-250><div class="vp-nolebase-page-property" data-page-property="value" data-page-property-type="dynamic" data-page-property-dynamic-type="reading-time" w-full inline-flex items-center><span>14 分钟</span></div></div><!--]--><!--]--></div></div><p>本章节将详细介绍如何通过 CI/CD 自动化流程发布你的 NapCat 插件，并将其收录到官方插件索引中。</p><div class="tip custom-block"><p class="custom-block-title">前提条件</p><ul><li>你已经基于 <a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/NapNeko/napcat-plugin-template" target="_blank" rel="noreferrer" data-v-2731f906><!--[-->napcat-plugin-template<!--]--><!----></a> 创建了自己的插件仓库</li><li>插件代码已经开发完成，并可以正常构建</li><li>你有一个 GitHub 账号</li></ul></div><h2 id="整体流程" tabindex="-1">整体流程 <a class="header-anchor" href="#整体流程" aria-label="Permalink to &quot;整体流程&quot;">​</a></h2><p>整个发布流程是自动化的，只需完成两步操作：<strong>配置 Secrets</strong> 和 <strong>推送 tag</strong>。</p><div class="mermaid my-class"></div><p>模板仓库内置了两个 GitHub Actions 工作流，分别负责：</p><table tabindex="0"><thead><tr><th>工作流文件</th><th>功能</th></tr></thead><tbody><tr><td><code>release.yml</code></td><td>自动构建项目、打包 zip、创建 GitHub Release</td></tr><tr><td><code>update-index.yml</code></td><td>Release 发布后，自动向插件索引仓库提交更新 PR</td></tr></tbody></table><h2 id="第一步-填写插件元信息" tabindex="-1">第一步：填写插件元信息 <a class="header-anchor" href="#第一步-填写插件元信息" aria-label="Permalink to &quot;第一步：填写插件元信息&quot;">​</a></h2><p>编辑你的 <code>package.json</code>，确保以下字段已正确填写：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark has-highlighted vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line highlighted"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;napcat-plugin-your-name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 插件唯一 ID，必须以 napcat-plugin- 开头</span></span>
<span class="line highlighted"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;plugin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;你的插件显示名&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,               </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 在插件市场中显示的名称</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;插件功能描述&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;author&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;你的名字&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line highlighted"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;napcat&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {                              </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 索引专用字段</span></span>
<span class="line highlighted"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;tags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;工具&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],                    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 插件标签，见下方可用标签</span></span>
<span class="line highlighted"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;minVersion&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;4.14.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,             </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 支持的最低 NapCat 版本</span></span>
<span class="line highlighted"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;homepage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                       // 留空则默认使用仓库地址</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="命名规范" tabindex="-1">命名规范 <a class="header-anchor" href="#命名规范" aria-label="Permalink to &quot;命名规范&quot;">​</a></h3><ul><li><code>name</code> 字段（即插件 ID）<strong>必须</strong>以 <code>napcat-plugin-</code> 开头</li><li>仅允许<strong>小写字母、数字和短横线</strong> <code>-</code>，禁止使用中文或大写字母</li><li>例如：<code>napcat-plugin-music</code>、<code>napcat-plugin-group-manager</code></li></ul><h3 id="可用标签" tabindex="-1">可用标签 <a class="header-anchor" href="#可用标签" aria-label="Permalink to &quot;可用标签&quot;">​</a></h3><p>以下标签可在 <code>napcat.tags</code> 数组中使用：</p><p><code>官方</code> <code>工具</code> <code>娱乐</code> <code>AI</code> <code>群管</code> <code>管理</code> <code>自动化</code> <code>语音</code> <code>表情</code> <code>撤回</code> <code>游戏</code> <code>音乐</code> <code>图片</code> <code>视频</code> <code>搜索</code> <code>翻译</code> <code>天气</code> <code>签到</code> <code>抽奖</code> <code>其他</code></p><h2 id="第二步-配置仓库-secrets" tabindex="-1">第二步：配置仓库 Secrets <a class="header-anchor" href="#第二步-配置仓库-secrets" aria-label="Permalink to &quot;第二步：配置仓库 Secrets&quot;">​</a></h2><p>在你的<strong>插件仓库</strong>的 <strong>Settings &gt; Secrets and variables &gt; Actions</strong> 中，需要添加以下 Secret：</p><h3 id="必选配置" tabindex="-1">必选配置 <a class="header-anchor" href="#必选配置" aria-label="Permalink to &quot;必选配置&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Secret 名称</th><th>说明</th></tr></thead><tbody><tr><td><code>INDEX_PAT</code></td><td>GitHub Personal Access Token，用于自动 fork 索引仓库并提交 PR</td></tr></tbody></table><details class="details custom-block"><summary>如何创建 Personal Access Token (PAT)</summary><p><strong>推荐方式：Classic Token（简单快速）</strong></p><ol><li>进入 GitHub <strong>Settings &gt; Developer settings &gt; Personal access tokens &gt; Tokens (classic)</strong></li><li>点击 <strong>Generate new token (classic)</strong></li><li>设置名称，例如 <code>napcat-plugin-index</code></li><li>勾选 <code>public_repo</code> 权限（位于 <code>repo</code> 下）</li><li>设置合理的过期时间</li><li>点击 <strong>Generate token</strong>，<strong>立即复制并保存</strong>，此 Token 只会显示一次</li><li>回到你的插件仓库，在 <strong>Settings &gt; Secrets and variables &gt; Actions</strong> 中添加名为 <code>INDEX_PAT</code> 的 Secret，值为上一步复制的 Token</li></ol><p><strong>备选方式：Fine-grained Token（更精确的权限控制）</strong></p><ol><li>进入 GitHub <strong>Settings &gt; Developer settings &gt; Personal access tokens &gt; Fine-grained tokens</strong></li><li>点击 <strong>Generate new token</strong></li><li>设置名称，例如 <code>napcat-plugin-index</code></li><li><strong>Resource owner</strong> 选择你自己的账号</li><li><strong>Repository access</strong> 选择 <strong>All repositories</strong>（因为 CI 会自动 fork 索引仓库到你的账号下）</li><li>展开 <strong>Repository permissions</strong>，设置以下权限： <ul><li><strong>Contents</strong>: <code>Read and write</code>（推送分支到 fork 仓库）</li><li><strong>Pull requests</strong>: <code>Read and write</code>（创建 PR）</li><li><strong>Workflows</strong>: <code>Read and write</code>（触发工作流）</li></ul></li><li>设置合理的过期时间</li><li>点击 <strong>Generate token</strong>，<strong>立即复制并保存</strong></li><li>回到你的插件仓库，添加名为 <code>INDEX_PAT</code> 的 Secret</li></ol></details><div class="tip custom-block"><p class="custom-block-title">无需手动 fork 索引仓库</p><p>工作流会<strong>自动完成</strong>以下操作，你只需配置 <code>INDEX_PAT</code> 即可：</p><ol><li>通过 PAT 获取你的 GitHub 用户名</li><li>自动 fork <a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/NapNeko/napcat-plugin-index" target="_blank" rel="noreferrer" data-v-2731f906><!--[-->napcat-plugin-index<!--]--><!----></a> 到你的账号下（如果尚未 fork）</li><li>同步 fork 到上游最新状态</li><li>将更新推送到你的 fork</li><li>从 fork 向官方仓库发起 PR</li></ol></div><h3 id="可选配置-ai-release-note" tabindex="-1">可选配置（AI Release Note） <a class="header-anchor" href="#可选配置-ai-release-note" aria-label="Permalink to &quot;可选配置（AI Release Note）&quot;">​</a></h3><p>如果你希望每次发布时自动用 AI 生成 Release Note，可以额外配置：</p><table tabindex="0"><thead><tr><th>Secret 名称</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td><code>AI_API_URL</code></td><td>是</td><td>兼容 OpenAI 格式的 API 地址（如 <code>https://api.openai.com/v1/chat/completions</code>）</td></tr><tr><td><code>AI_API_KEY</code></td><td>是</td><td>对应的 API 密钥</td></tr><tr><td><code>AI_MODEL</code></td><td>否</td><td>模型名称，默认 <code>gpt-4o-mini</code></td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>不配置 AI 相关 Secret 不影响发布流程。未配置或 AI 调用失败时，会自动回退到默认的 Release Note 模板。</p></div><h2 id="第三步-发布" tabindex="-1">第三步：发布！ <a class="header-anchor" href="#第三步-发布" aria-label="Permalink to &quot;第三步：发布！&quot;">​</a></h2><p>配置完成后，执行以下命令即可触发发布流程：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tag</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1.0.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1.0.0</span></span></code></pre></div><p>推送 <code>v*</code> 格式的 tag 后，CI 将自动完成后续所有步骤。</p><p>你也可以在 GitHub 仓库页面的 <strong>Actions</strong> 标签页中，手动触发 <code>Build and Release</code> 工作流并填入版本号。</p><h2 id="ci-工作流详解" tabindex="-1">CI 工作流详解 <a class="header-anchor" href="#ci-工作流详解" aria-label="Permalink to &quot;CI 工作流详解&quot;">​</a></h2><h3 id="release-yml-—-自动构建与发布" tabindex="-1">release.yml — 自动构建与发布 <a class="header-anchor" href="#release-yml-—-自动构建与发布" aria-label="Permalink to &quot;release.yml — 自动构建与发布&quot;">​</a></h3><p>这个工作流在你推送 <code>v*</code> tag 或手动触发时执行，完成以下任务：</p><div class="mermaid my-class"></div><h4 id="核心步骤说明" tabindex="-1">核心步骤说明 <a class="header-anchor" href="#核心步骤说明" aria-label="Permalink to &quot;核心步骤说明&quot;">​</a></h4><p><strong>1. 版本号解析</strong></p><p>CI 会按优先级获取版本号：</p><ul><li>手动触发时输入的版本号</li><li>tag 名称（如 <code>v1.0.0</code> → <code>1.0.0</code>）</li><li>自动生成时间戳版本（兜底）</li></ul><p><strong>2. 构建与打包</strong></p><p>执行 <code>pnpm run build</code> 构建项目后，自动将产物打包为 zip 文件：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>release/</span></span>
<span class="line"><span>├── index.mjs       # 插件主入口</span></span>
<span class="line"><span>├── package.json    # 精简后的 package.json</span></span>
<span class="line"><span>└── webui/          # WebUI 构建产物（如有）</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">修改插件名称</p><p>如果你的插件不叫 <code>napcat-plugin-template</code>，需要修改 <code>release.yml</code> 中 <strong>Prepare release package</strong> 步骤的 <code>PLUGIN_NAME</code> 环境变量为你的实际插件名。</p></div><p><strong>3. Release Note 生成</strong></p><ul><li>如果配置了 AI Secret → 使用 AI 根据 commit 记录生成结构化 Release Note</li><li>如果未配置或 AI 调用失败 → 使用 <code>.github/prompt/default.md</code> 模板回退</li><li>如果模板也不存在 → 直接使用 commit log</li></ul><p>你可以自定义 AI 的提示词，在 <code>.github/prompt/release_note_prompt.txt</code> 文件中修改即可。</p><p><strong>4. 触发索引更新</strong></p><p>Release 创建成功后，会通过 <code>workflow_dispatch</code> 自动触发 <code>update-index.yml</code> 工作流。</p><div class="info custom-block"><p class="custom-block-title">为什么要手动触发？</p><p>因为 GitHub Actions 中，由默认 <code>GITHUB_TOKEN</code> 创建的 Release <strong>不会</strong>自动触发 <code>on.release</code> 事件。所以 <code>release.yml</code> 在最后一步通过 API 手动触发索引更新工作流。</p></div><h3 id="update-index-yml-—-自动更新插件索引" tabindex="-1">update-index.yml — 自动更新插件索引 <a class="header-anchor" href="#update-index-yml-—-自动更新插件索引" aria-label="Permalink to &quot;update-index.yml — 自动更新插件索引&quot;">​</a></h3><p>这个工作流在 Release 发布后被触发，完成以下任务：</p><div class="mermaid my-class"></div><h4 id="核心步骤说明-1" tabindex="-1">核心步骤说明 <a class="header-anchor" href="#核心步骤说明-1" aria-label="Permalink to &quot;核心步骤说明&quot;">​</a></h4><p><strong>1. 提取元信息</strong></p><p>CI 会从你的 <code>package.json</code> 中自动读取：</p><table tabindex="0"><thead><tr><th>字段来源</th><th>映射到索引字段</th></tr></thead><tbody><tr><td><code>name</code></td><td><code>id</code></td></tr><tr><td><code>plugin</code> (或 <code>name</code>)</td><td><code>name</code></td></tr><tr><td><code>description</code></td><td><code>description</code></td></tr><tr><td><code>author</code></td><td><code>author</code></td></tr><tr><td><code>napcat.tags</code></td><td><code>tags</code></td></tr><tr><td><code>napcat.minVersion</code></td><td><code>minVersion</code></td></tr><tr><td><code>napcat.homepage</code> (或 <code>homepage</code>)</td><td><code>homepage</code></td></tr></tbody></table><p>下载链接会自动构造为：<code>https://github.com/&lt;你的仓库&gt;/releases/download/&lt;版本号&gt;/&lt;插件ID&gt;.zip</code></p><p><strong>2. 验证资源可达</strong></p><p>CI 会 curl 检查下载链接是否可访问。如果第一次失败，会等待 30 秒后重试（因为 Release 资源上传可能有延迟）。两次都失败则跳过索引更新。</p><p><strong>3. 自动 fork 与同步</strong></p><p>CI 会通过 GitHub API 自动完成以下操作：</p><ul><li>使用 <code>INDEX_PAT</code> 获取你的 GitHub 用户名</li><li>检查你账号下是否已有 <code>napcat-plugin-index</code> 的 fork，如果没有则自动创建</li><li>调用 <code>merge-upstream</code> API 将 fork 同步到官方索引仓库的最新状态</li></ul><p><strong>4. 提交 PR</strong></p><p>CI 会 checkout 官方索引仓库，使用 Node.js 脚本更新 <code>plugins.v4.json</code> 文件：</p><ul><li>如果插件 ID 已存在 → 更新该条目</li><li>如果是新插件 → 追加到列表</li></ul><p>然后通过 <a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/peter-evans/create-pull-request" target="_blank" rel="noreferrer" data-v-2731f906><!--[-->peter-evans/create-pull-request<!--]--><!----></a> Action 的 <code>push-to-fork</code> 功能，将更新推送到你的 fork 仓库，并从 fork 向官方索引仓库发起 PR。</p><div class="info custom-block"><p class="custom-block-title">为什么要通过 fork 提交？</p><p>你的 PAT 没有官方索引仓库 <a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/NapNeko/napcat-plugin-index" target="_blank" rel="noreferrer" data-v-2731f906><!--[-->napcat-plugin-index<!--]--><!----></a> 的写入权限，这是正常的。工作流自动将你的 fork 作为中转，完整流程是：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>自动 fork 索引仓库 → 同步到上游最新 → 推送更新到 fork → 从 fork 向官方仓库发起 PR</span></span></code></pre></div></div><h2 id="索引仓库的自动审核" tabindex="-1">索引仓库的自动审核 <a class="header-anchor" href="#索引仓库的自动审核" aria-label="Permalink to &quot;索引仓库的自动审核&quot;">​</a></h2><p>你的 PR 提交到 <a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/NapNeko/napcat-plugin-index" target="_blank" rel="noreferrer" data-v-2731f906><!--[-->napcat-plugin-index<!--]--><!----></a> 后，索引仓库有一套完善的自动化审核流程：</p><table tabindex="0"><thead><tr><th>工作流</th><th>触发条件</th><th>功能</th></tr></thead><tbody><tr><td><strong>PR 自动审核</strong> (<code>validate-pr.yml</code>)</td><td>PR 修改 <code>plugins.v4.json</code></td><td>校验 JSON 格式、字段完整性、ID 唯一性、版本号格式、包名规范、下载链接可达性</td></tr><tr><td><strong>校验结果评论</strong> (<code>comment-on-pr.yml</code>)</td><td>审核完成后</td><td>在 PR 中评论校验结果，自动打标签（新插件 / 插件更新 / 插件删除）</td></tr><tr><td><strong>AI 安全审计</strong> (<code>security-scan.yml</code>)</td><td>PR 更新/新增插件</td><td>下载插件 zip 进行静态代码分析 + AI 深度审查，检测高危代码</td></tr><tr><td><strong>链接定时巡检</strong> (<code>check-links.yml</code>)</td><td>每天定时执行</td><td>检查所有已索引插件的下载链接是否有效，失效时自动创建 Issue</td></tr></tbody></table><h3 id="审核结果" tabindex="-1">审核结果 <a class="header-anchor" href="#审核结果" aria-label="Permalink to &quot;审核结果&quot;">​</a></h3><ul><li><strong>校验通过 + 无安全风险</strong> → 低风险 PR 自动合并，或等待维护者审核合并</li><li><strong>校验未通过</strong> → Bot 会在 PR 下评论具体的错误信息，你需要修复后重新提交</li><li><strong>发现高危代码</strong> → 需要人工审核</li></ul><div class="warning custom-block"><p class="custom-block-title">常见校验失败原因</p><ul><li>插件 ID 不符合 <code>napcat-plugin-xxx</code> 格式</li><li>必填字段为空</li><li><code>downloadUrl</code> 不是可访问的 <code>.zip</code> 链接</li><li>版本号不符合 <a class="VPNolebaseInlinePreviewLink" relative href="https://semver.org/" target="_blank" rel="noreferrer" data-v-2731f906><!--[-->semver<!--]--><!----></a> 格式</li><li>插件包内 <code>package.json</code> 的 <code>name</code> 与索引中的 <code>id</code> 不一致</li></ul></div><h2 id="版本更新发布" tabindex="-1">版本更新发布 <a class="header-anchor" href="#版本更新发布" aria-label="Permalink to &quot;版本更新发布&quot;">​</a></h2><p>后续版本更新流程与首次发布完全一致：</p><ol><li>修改 <code>package.json</code> 中的 <code>version</code>（可选，CI 会以 tag 为准）</li><li>推送新 tag：<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tag</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1.1.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1.1.0</span></span></code></pre></div></li><li>CI 自动构建、发布、更新索引</li></ol><h2 id="自定义-release-note-模板" tabindex="-1">自定义 Release Note 模板 <a class="header-anchor" href="#自定义-release-note-模板" aria-label="Permalink to &quot;自定义 Release Note 模板&quot;">​</a></h2><h3 id="默认模板" tabindex="-1">默认模板 <a class="header-anchor" href="#默认模板" aria-label="Permalink to &quot;默认模板&quot;">​</a></h3><p>在 <code>.github/prompt/default.md</code> 中自定义默认 Release Note 模板，支持 <code>{VERSION}</code> 占位符：</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## {VERSION}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### 核心更新</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 更新版本至 {VERSION}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### 安装说明</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">1.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 下载 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">`你的插件名.zip`</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">2.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 解压到 NapCat 的 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">`plugins`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 目录</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">3.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 重启 NapCat</span></span></code></pre></div><h3 id="ai-prompt-自定义" tabindex="-1">AI Prompt 自定义 <a class="header-anchor" href="#ai-prompt-自定义" aria-label="Permalink to &quot;AI Prompt 自定义&quot;">​</a></h3><p>在 <code>.github/prompt/release_note_prompt.txt</code> 中自定义 AI 生成 Release Note 的 system prompt，支持 <code>{VERSION}</code> 和 <code>{PREV_VERSION}</code> 占位符。</p><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h2><h3 id="q-能不能手动提交-pr-到索引仓库" tabindex="-1">Q: 能不能手动提交 PR 到索引仓库？ <a class="header-anchor" href="#q-能不能手动提交-pr-到索引仓库" aria-label="Permalink to &quot;Q: 能不能手动提交 PR 到索引仓库？&quot;">​</a></h3><p>不建议。索引仓库已采用全自动审核机制，手动提交的 PR 将不会被合入。请使用模板仓库的 CI 自动提交流程。</p><p>如果你不想使用模板仓库，请自行实现等效的 CI 工作流。</p><h3 id="q-不用模板仓库-自己写-ci-行不行" tabindex="-1">Q: 不用模板仓库，自己写 CI 行不行？ <a class="header-anchor" href="#q-不用模板仓库-自己写-ci-行不行" aria-label="Permalink to &quot;Q: 不用模板仓库，自己写 CI 行不行？&quot;">​</a></h3><p>可以，只要你的 CI 能够：</p><ol><li>构建产物并打包为 <code>&lt;插件ID&gt;.zip</code>（包含 <code>index.mjs</code>、<code>package.json</code>、<code>webui/</code>）</li><li>创建 GitHub Release 并上传 zip</li><li>向 <code>NapNeko/napcat-plugin-index</code> 仓库提交 PR，更新 <code>plugins.v4.json</code></li></ol><p>可以参考模板仓库的 <a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/NapNeko/napcat-plugin-template/blob/main/.github/workflows/release.yml" target="_blank" rel="noreferrer" data-v-2731f906><!--[-->release.yml<!--]--><!----></a> 和 <a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/NapNeko/napcat-plugin-template/blob/main/.github/workflows/update-index.yml" target="_blank" rel="noreferrer" data-v-2731f906><!--[-->update-index.yml<!--]--><!----></a>。</p><h3 id="q-index-pat-token-过期了怎么办" tabindex="-1">Q: INDEX_PAT Token 过期了怎么办？ <a class="header-anchor" href="#q-index-pat-token-过期了怎么办" aria-label="Permalink to &quot;Q: INDEX_PAT Token 过期了怎么办？&quot;">​</a></h3><p>重新生成一个新的 PAT，更新仓库 Secret 即可。建议设置较长的过期时间，或使用 Fine-grained Token。</p><h3 id="q-提交-pr-到索引仓库时报-403-permission-denied" tabindex="-1">Q: 提交 PR 到索引仓库时报 403 / Permission denied？ <a class="header-anchor" href="#q-提交-pr-到索引仓库时报-403-permission-denied" aria-label="Permalink to &quot;Q: 提交 PR 到索引仓库时报 403 / Permission denied？&quot;">​</a></h3><p>请检查以下几点：</p><ol><li><strong>PAT 权限不足</strong>：Classic Token 需要 <code>public_repo</code> 权限；Fine-grained Token 需要 <code>Contents: Read and write</code> + <code>Pull requests: Read and write</code> 权限，且 Repository access 需要选择 <strong>All repositories</strong></li><li><strong>PAT 已过期</strong>：重新生成并更新 Secret</li><li><strong>工作流版本过旧</strong>：确保你使用的是最新版模板的 <code>update-index.yml</code>，新版工作流已内置自动 fork 功能，无需手动 fork 或修改工作流</li></ol><h3 id="q-release-发布了但索引没更新" tabindex="-1">Q: Release 发布了但索引没更新？ <a class="header-anchor" href="#q-release-发布了但索引没更新" aria-label="Permalink to &quot;Q: Release 发布了但索引没更新？&quot;">​</a></h3><p>检查 Actions 页面中 <code>update-index.yml</code> 的运行日志。常见原因：</p><ul><li><code>INDEX_PAT</code> 未配置或已过期</li><li>PAT 权限不足（见上一条）</li><li>下载链接验证失败（Release 资源尚未上传完成）</li><li><code>package.json</code> 中缺少必要字段</li></ul><h3 id="q-下载链接验证失败" tabindex="-1">Q: 下载链接验证失败？ <a class="header-anchor" href="#q-下载链接验证失败" aria-label="Permalink to &quot;Q: 下载链接验证失败？&quot;">​</a></h3><p>GitHub Release 资源上传可能有延迟。CI 已内置 30 秒重试机制。如果仍失败，可以等资源上传完成后手动触发 <code>update-index.yml</code> 工作流。</p><!--[--><!----><div class="bg-$vp-custom-block-details-bg mt-6 vp-nolebase-git-changelog vp-nolebase-git-changelog-history vp-nolebase-git-changelog-history-list vp-nolebase-git-changelog-history-container" rounded-lg p-4 data-v-52549c39><label cursor-pointer data-v-52549c39><div class="vp-nolebase-git-changelog-title flex select-none items-center justify-between" transition="color ease-in-out" text="&lt;sm:xs" duration-200 data-v-52549c39><span class="vp-nolebase-git-changelog-last-edited-title inline-flex items-center gap-3" data-v-52549c39><div class="i-octicon:history-16" data-v-52549c39></div><span data-v-52549c39>最后编辑于 13 天前</span></span><div class="i-octicon:sort-desc-16" ml-auto mr-4 cursor-pointer data-v-52549c39></div><span class="vp-nolebase-git-changelog-view-full-history-title inline-flex cursor-pointer items-center gap-3" data-v-52549c39><span class="&lt;sm:hidden" data-v-52549c39>查看完整历史</span><svg class="rotate-0 i-octicon:chevron-down-16" transition="transform ease-in-out" duration-200 data-v-52549c39></svg></span></div></label><div class="grid grid-cols-[30px_auto] mt-3 gap-1.5 children:my-auto -ml-1.5" text="&lt;sm:xs" style="display:none;" data-v-52549c39><!--[--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-4efc63fc></div><div flex gap-1 align-baseline data-v-4efc63fc><a href="https://github.com/NapNeko/NapCatDocs/commit/b48358e40681f5dc16416774c130a0ff3eb304e6" target="_blank" class="no-icon" data-v-4efc63fc><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-4efc63fc>b48358e</code></a><span data-v-4efc63fc>-</span><span data-v-4efc63fc><span class="text-sm &lt;sm:text-xs" data-v-4efc63fc>feat: 更新插件发布文档，增加自动 fork 和同步功能说明</span><span class="my-1 ml-3 gap-1" data-v-4efc63fc><!--[--><!--[--><img src="https://gravatar.com/avatar/ce7916dc3a2092038d49830141ca3d3d71af983b1cd81fbdd5cbe3dde047431f?d=retro" alt="The avatar of contributor named as Qiao" class="vp-nolebase-git-changelog-commit-avatar inline-block h-6 w-6 rounded-full v-middle" data-v-4efc63fc><!--]--><!--]--></span><!----></span></div><!--]--><!--]--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-4efc63fc></div><div flex gap-1 align-baseline data-v-4efc63fc><a href="https://github.com/NapNeko/NapCatDocs/commit/56176cd1de704882f1d5a2d49b6514b2a98b7919" target="_blank" class="no-icon" data-v-4efc63fc><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-4efc63fc>56176cd</code></a><span data-v-4efc63fc>-</span><span data-v-4efc63fc><span class="text-sm &lt;sm:text-xs" data-v-4efc63fc>feat: 新增插件机制文档、发布指南、WebUI 开发以及项目结构最佳实践</span><span class="my-1 ml-3 gap-1" data-v-4efc63fc><!--[--><!--[--><img src="https://gravatar.com/avatar/ce7916dc3a2092038d49830141ca3d3d71af983b1cd81fbdd5cbe3dde047431f?d=retro" alt="The avatar of contributor named as Qiao" class="vp-nolebase-git-changelog-commit-avatar inline-block h-6 w-6 rounded-full v-middle" data-v-4efc63fc><!--]--><!--]--></span><!----></span></div><!--]--><!--]--><!--]--></div></div><!--]--></div></div></main><footer class="VPDocFooter" data-v-4f95a2d9 data-v-ebefe59e><!--[--><!--]--><div class="edit-info" data-v-ebefe59e><div class="edit-link" data-v-ebefe59e><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/NapNeko/NapCatDocs/edit/main/src/develop/plugin/publish.md" target="_blank" rel="noreferrer" data-v-ebefe59e><!--[--><span class="vpi-square-pen edit-link-icon" data-v-ebefe59e></span> 在 GitHub 上编辑此页面<!--]--></a></div><div class="last-updated" data-v-ebefe59e><p class="VPLastUpdated" data-v-ebefe59e data-v-0123dd20>最后更新于: <time datetime="2026-02-08T02:30:39.000Z" data-v-0123dd20></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-ebefe59e><span class="visually-hidden" id="doc-footer-aria-label" data-v-ebefe59e>Pager</span><div class="pager" data-v-ebefe59e><a class="VPLink link pager-link prev" href="/develop/plugin/hot-reload" data-v-ebefe59e><!--[--><span class="desc" data-v-ebefe59e>上一页</span><span class="title" data-v-ebefe59e>热重载开发</span><!--]--></a></div><div class="pager" data-v-ebefe59e><a class="VPLink link pager-link next" href="/develop/plugin/api/doc" data-v-ebefe59e><!--[--><span class="desc" data-v-ebefe59e>下一页</span><span class="title" data-v-ebefe59e>API 文档</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!----><!--]--></div></div>
    
    
  </body>
</html>